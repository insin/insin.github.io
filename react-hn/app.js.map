{"version":3,"sources":["webpack:///app.js","webpack:///C:/repos/react-hn/src/index.js","webpack:///C:/repos/react-hn/src/stores/SettingsStore.js","webpack:///C:/repos/react-hn/src/services/HNService.js","webpack:///C:/repos/react-hn/src/Spinner.js","webpack:///C:/repos/react-hn/src/utils/buildClassName.js","webpack:///C:/repos/react-hn/src/utils/extend.js","webpack:///C:/repos/react-hn/src/utils/setTitle.js","webpack:///C:/repos/react-hn/src/stores/StoryStore.js","webpack:///C:/repos/react-hn/src/stores/UpdatesStore.js","webpack:///C:/repos/react-hn/src/utils/constants.js","webpack:///C:/repos/react-hn/src/utils/pluralise.js","webpack:///C:/repos/react-hn/src/mixins/CommentMixin.js","webpack:///C:/repos/react-hn/src/mixins/ItemMixin.js","webpack:///C:/repos/react-hn/src/stores/CommentThreadStore.js","webpack:///C:/repos/react-hn/src/stores/StoryCommentThreadStore.js","webpack:///C:/repos/react-hn/src/Comment.js","webpack:///C:/repos/react-hn/src/Paginator.js","webpack:///C:/repos/react-hn/src/mixins/ListItemMixin.js","webpack:///C:/repos/react-hn/src/mixins/PageNumberMixin.js","webpack:///C:/repos/react-hn/src/stores/ItemStore.js","webpack:///C:/repos/react-hn/src/utils/pageCalc.js","webpack:///C:/repos/react-hn/src/utils/storage.js","webpack:///C:/repos/react-hn/src/App.js","webpack:///C:/repos/react-hn/src/DisplayComment.js","webpack:///C:/repos/react-hn/src/DisplayListItem.js","webpack:///C:/repos/react-hn/src/Item.js","webpack:///C:/repos/react-hn/src/NotFound.js","webpack:///C:/repos/react-hn/src/PermalinkedComment.js","webpack:///C:/repos/react-hn/src/PollOption.js","webpack:///C:/repos/react-hn/src/Settings.js","webpack:///C:/repos/react-hn/src/Stories.js","webpack:///C:/repos/react-hn/src/StoryListItem.js","webpack:///C:/repos/react-hn/src/Updates.js","webpack:///C:/repos/react-hn/src/UserProfile.js","webpack:///C:/repos/react-hn/src/routes.js","webpack:///C:/repos/react-hn/src/utils/cancellableDebounce.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_defaultProps","defaultProps","props","propName","_typeofReactElement","Symbol","createHashHistory","_require","render","_require2","Router","routes","history","queryKey","$$typeof","type","key","ref","_owner","document","getElementById",8,"extend","storage","STORAGE_KEY","SettingsStore","autoCollapse","replyLinks","showDead","showDeleted","titleFontSize","listSpacing","load","json","get","this","JSON","parse","save","set","stringify",12,"fetchItem","id","cb","itemRef","once","snapshot","val","fetchItems","ids","addItem","item","items","push","length","forEach","storiesRef","path","api","child","userRef","updatesRef","Firebase",19,"React","Spinner","createClass","displayName","getDefaultProps","size","spacing","bounceSize","bounceStyle","height","width","marginRight","children","className","style","Number",30,"buildClassName","staticClassName","conditionalClassNames","classNames","classNameKeys","Object","keys","i","l","join",31,"dest","src1","src2",32,"setTitle","title","SITE_TITLE",40,"_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","populateStoryList","idCache","storyList","storyLists","itemCache","parseJSON","defaultValue","_createClass","defineProperties","target","descriptor","defineProperty","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","desc","parent","getter","undefined","Function","getOwnPropertyDescriptor","call","getPrototypeOf","EventEmitter","HNService","firebaseRef","StoryStore","_EventEmitter","onStorage","bind","onStoriesUpdated","stories","index","e","emit","getState","on","window","addEventListener","off","removeEventListener","getItem","loadSession","sessionStorage","saveSession",41,"sortByTimeDesc","a","b","time","cacheObjToSortedArray","obj","arr","map","sort","populateUpdates","updates","comments","processCacheObj","updatesCache","cacheObj","splice","UPDATES_CACHE_SIZE","Math","max","handleUpdateItems","deleted","updateItemTypes","UpdatesStore","comment","job","poll","story","start","stop","getUpdates","getComment","getStory","removeListener",42,"ITEMS_PER_PAGE",43,"pluralise","howMany","suffixes","split",57,"Link","TimeAgo","ItemStore","_ref","_ref2","CommentMixin","fetchAncestors","_this","fetchCommentAncestors","result","isMounted","setState","op","renderCommentLoading","loadingSpinner","delayed","level","renderCommentDeleted","options","href","renderError","renderCollapseControl","collapsed","onClick","toggleCollapse","onKeyPress","tabIndex","renderCommentMeta","dead","collapsible","childCounts","newComments","by","to","date","link","state","renderCommentText","dangerouslySetInnerHTML","__html","text","replyLink",58,"parseHost","createElement","url","parts","hostname","slice","shift","ItemMixin","renderItemMeta","extraContent","itemDate","Date","score","descendants","renderItemTitle","hasURL","fontSize",59,"CommentThreadStore","onCommentsChanged","itemId","isNew","isCollapsed","getChildCounts","childCount","newCommentCount","nodes","nextNodes","nodeChildren","apply","commentAdded","commentDeleted","siblings","indexOf","commentId",60,"loadState","lastVisit","commentCount","maxCommentId","StoryCommentThreadStore","startedLoading","now","parents","loading","expectedComments","kids","itemDescendantCount","initialState","prevMaxCommentId","isFirstVisit","cached","checkLoadCompletion","debounce","numberOfCommentsChanged","firstLoadComplete","collapseThreadsWithoutNewComments","_storeState","itemUpdated","commentDelayed","commentDied","adjustExpectedComments","change","newCommentIds","hasNewComments","shouldCollapse","commentIds","nextCommentIds","childCommentIds","markAsRead","dispose","cancel",87,"ReactFireMixin","cx","Comment","mixins","propTypes","PropTypes","number","isRequired","bool","threadStore","instanceOf","getInitialState","componentWillMount","bindFirebaseRef","componentWillUnmount","clearDelayTimeout","componentDidUpdate","prevProps","prevState","prevKids","bindAsObject","handleFirebaseRefCancelled","timeout","unbind","setTimeout","forceUpdate","clearTimeout","preventDefault","Comment--collapsed","Comment--dead","Comment--new",88,"Paginator","_onClick","scrollTo","page","hasNext","route","query",89,"ListItemMixin","getNewCommentCount","threadState","renderListItem","ListItem--dead","marginBottom",90,"PageNumberMixin","getPageNumber","location","test",91,"setImmediate","fetchCommentParent","parentId","commentParentLookup","titleCache","itemCount","cacheHits","processCommentParent","cachedItem","getCachedItem","getCachedStory","startTime","timeTaken",92,"pageCalc","pageNum","pageSize","numItems","startIndex","endIndex","min",93,"localStorage",143,"Settings","src","alt","activeClassName","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","App","showSettings","handleBeforeUnload","toggleSettings",144,"DisplayComment",145,"DisplayListItem",146,"timeUnitsAgo","unit","suffix","PollOption","Item","params","handleCommentsChanged","componentWillReceiveProps","nextProps","componentWillUpdate","nextState","kidDiff","payload","formatter","Item--dead",147,"NotFound",148,"_setTitle","PermalinkedComment","commentLoaded","context","router","replaceWith",149,"pollopt",150,"htmlFor","componentDidMount","refs","container","focus","onChange","el","name","checked","stopPropagation","step",151,"StoryListItem","Stories","limit","string","store","addListener","handleUpdate","update","dummyItems","renderItems","rendered",152,"initLiveItem","updateThreadState",153,"filterDead","filterUpdates","filter","Updates","handleUpdates",154,"UserProfile","user","createdDate","created","toDateString","karma","delay","about",155,"_extends","assign","arguments","source","hasOwnProperty","IndexRoute","Route","Ask","Comments","Jobs","New","Show","Top","component",156,"cancellableDebounce","func","wait","immediate","args","timestamp","later","last","debounced","callNow"],"mappings":"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","file":"app.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\t__webpack_require__(141);\n\t\n\tvar createHashHistory = __webpack_require__(62);\n\tvar React = __webpack_require__(2);\n\t\n\tvar _require = __webpack_require__(103);\n\t\n\tvar render = _require.render;\n\t\n\tvar _require2 = __webpack_require__(15);\n\t\n\tvar Router = _require2.Router;\n\t\n\tvar routes = __webpack_require__(155);\n\t\n\t// Opt out of persistent state query key for for hash history\n\t// See https://github.com/rackt/history/blob/master/docs/HashHistoryCaveats.md\n\tvar history = createHashHistory({ queryKey: false });\n\t\n\trender({\n\t  $$typeof: _typeofReactElement,\n\t  type: Router,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Router.defaultProps, {\n\t    history: history,\n\t    routes: routes\n\t  }),\n\t  _owner: null\n\t}, document.getElementById('app'));\n\n/***/ },\n\n/***/ 8:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar extend = __webpack_require__(31);\n\tvar storage = __webpack_require__(93);\n\t\n\tvar STORAGE_KEY = 'settings';\n\t\n\tvar SettingsStore = {\n\t  autoCollapse: true,\n\t  replyLinks: true,\n\t  showDead: false,\n\t  showDeleted: false,\n\t  titleFontSize: 18,\n\t  listSpacing: 16,\n\t\n\t  load: function load() {\n\t    var json = storage.get(STORAGE_KEY);\n\t    if (json) {\n\t      extend(this, JSON.parse(json));\n\t    }\n\t  },\n\t\n\t  save: function save() {\n\t    storage.set(STORAGE_KEY, JSON.stringify({\n\t      autoCollapse: this.autoCollapse,\n\t      replyLinks: this.replyLinks,\n\t      showDead: this.showDead,\n\t      showDeleted: this.showDeleted,\n\t      titleFontSize: this.titleFontSize,\n\t      listSpacing: this.listSpacing\n\t    }));\n\t  }\n\t};\n\t\n\tmodule.exports = SettingsStore;\n\n/***/ },\n\n/***/ 12:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Firebase = __webpack_require__(94);\n\t\n\tvar api = new Firebase('https://hacker-news.firebaseio.com/v0');\n\t\n\tfunction fetchItem(id, cb) {\n\t  itemRef(id).once('value', function (snapshot) {\n\t    cb(snapshot.val());\n\t  });\n\t}\n\t\n\tfunction fetchItems(ids, cb) {\n\t  var items = [];\n\t  ids.forEach(function (id) {\n\t    fetchItem(id, addItem);\n\t  });\n\t  function addItem(item) {\n\t    items.push(item);\n\t    if (items.length >= ids.length) {\n\t      cb(items);\n\t    }\n\t  }\n\t}\n\t\n\tfunction storiesRef(path) {\n\t  return api.child(path);\n\t}\n\t\n\tfunction itemRef(id) {\n\t  return api.child('item/' + id);\n\t}\n\t\n\tfunction userRef(id) {\n\t  return api.child('user/' + id);\n\t}\n\t\n\tfunction updatesRef() {\n\t  return api.child('updates/items');\n\t}\n\t\n\tmodule.exports = {\n\t  fetchItem: fetchItem,\n\t  fetchItems: fetchItems,\n\t  storiesRef: storiesRef,\n\t  itemRef: itemRef,\n\t  userRef: userRef,\n\t  updatesRef: updatesRef\n\t};\n\n/***/ },\n\n/***/ 19:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tvar React = __webpack_require__(2);\n\t\n\t// TODO Implement GIF-based fallback for IE9 and another non-animating browsers\n\t//      See https://github.com/tobiasahlin/SpinKit for how-to\n\tvar Spinner = React.createClass({\n\t  displayName: 'Spinner',\n\t\n\t  getDefaultProps: function getDefaultProps() {\n\t    return { size: 6, spacing: 2 };\n\t  },\n\t\n\t  render: function render() {\n\t    var bounceSize = this.props.size + 'px';\n\t    var bounceStyle = { height: bounceSize, width: bounceSize, marginRight: this.props.spacing + 'px' };\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [{\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            className: 'bounce1',\n\t            style: bounceStyle\n\t          },\n\t          _owner: null\n\t        }, {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            className: 'bounce2',\n\t            style: bounceStyle\n\t          },\n\t          _owner: null\n\t        }, {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            className: 'bounce3',\n\t            style: bounceStyle\n\t          },\n\t          _owner: null\n\t        }],\n\t        className: 'Spinner',\n\t        style: { width: (Number(this.props.size) + Number(this.props.spacing)) * 3 + 'px' }\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t});\n\t\n\tmodule.exports = Spinner;\n\n/***/ },\n\n/***/ 30:\n/***/ function(module, exports) {\n\n\t/**\n\t * Creates a className string including some class names conditionally.\n\t * @param {string=} staticClassName class name(s) which should always be\n\t *   included.\n\t * @param {Object.<string, *>} conditionalClassNames an object mapping class\n\t *   names to a value which indicates if the class name should be included -\n\t *   class names will be included if their corresponding value is truthy.\n\t * @return {string}\n\t */\n\t'use strict';\n\t\n\tfunction buildClassName(staticClassName, conditionalClassNames) {\n\t  var classNames = [];\n\t  if (typeof conditionalClassNames == 'undefined') {\n\t    conditionalClassNames = staticClassName;\n\t  } else {\n\t    classNames.push(staticClassName);\n\t  }\n\t  var classNameKeys = Object.keys(conditionalClassNames);\n\t  for (var i = 0, l = classNameKeys.length; i < l; i++) {\n\t    if (conditionalClassNames[classNameKeys[i]]) {\n\t      classNames.push(classNameKeys[i]);\n\t    }\n\t  }\n\t  return classNames.join(' ');\n\t}\n\t\n\tmodule.exports = buildClassName;\n\n/***/ },\n\n/***/ 31:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tfunction extend(dest, src1, src2) {\n\t  var props = Object.keys(src1);\n\t  for (var i = 0, l = props.length; i < l; i++) {\n\t    dest[props[i]] = src1[props[i]];\n\t  }\n\t  if (src2) {\n\t    props = Object.keys(src2);\n\t    for (i = 0, l = props.length; i < l; i++) {\n\t      dest[props[i]] = src2[props[i]];\n\t    }\n\t  }\n\t  return dest;\n\t}\n\t\n\tmodule.exports = extend;\n\n/***/ },\n\n/***/ 32:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _require = __webpack_require__(42);\n\t\n\tvar SITE_TITLE = _require.SITE_TITLE;\n\t\n\tfunction setTitle(title) {\n\t  document.title = title ? title + ' | ' + SITE_TITLE : SITE_TITLE;\n\t}\n\t\n\tmodule.exports = setTitle;\n\n/***/ },\n\n/***/ 40:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _require = __webpack_require__(61);\n\t\n\tvar EventEmitter = _require.EventEmitter;\n\t\n\tvar HNService = __webpack_require__(12);\n\t\n\tvar extend = __webpack_require__(31);\n\t\n\t/**\n\t * Firebase reference used to stream updates - only one StoryStore instance can\n\t * be active at a time.\n\t */\n\tvar firebaseRef = null;\n\t\n\t// Cache objects shared among StoryStore instances, also accessible via static\n\t// functions on the StoryStore constructor.\n\t\n\t/**\n\t * Story ids by type, in rank order. Persisted to sessionStorage.\n\t * @type Object.<type, Array.<id>>\n\t */\n\tvar idCache = {};\n\t\n\t/**\n\t * Item cache. Persisted to sessionStorage.\n\t * @type Object.<id, item>\n\t */\n\tvar itemCache = {};\n\t\n\t/**\n\t * Story items in rank order for display, by type.\n\t * @type Object.<type, Array.<item>>\n\t */\n\tvar storyLists = {};\n\t\n\t/**\n\t * Populate the story list for the given story type from the cache.\n\t */\n\tfunction populateStoryList(type) {\n\t  var ids = idCache[type];\n\t  var storyList = storyLists[type];\n\t  for (var i = 0, l = ids.length; i < l; i++) {\n\t    storyList[i] = itemCache[ids[i]] || null;\n\t  }\n\t}\n\t\n\tfunction parseJSON(json, defaultValue) {\n\t  return json ? JSON.parse(json) : defaultValue;\n\t}\n\t\n\tvar StoryStore = (function (_EventEmitter) {\n\t  _inherits(StoryStore, _EventEmitter);\n\t\n\t  function StoryStore(type) {\n\t    _classCallCheck(this, StoryStore);\n\t\n\t    _get(Object.getPrototypeOf(StoryStore.prototype), 'constructor', this).call(this);\n\t    this.type = type;\n\t\n\t    // Ensure cache objects for this type are initialised\n\t    if (!(type in idCache)) {\n\t      idCache[type] = [];\n\t    }\n\t    if (!(type in storyLists)) {\n\t      storyLists[type] = [];\n\t      populateStoryList(type);\n\t    }\n\t\n\t    // Pre-bind event handlers per instance\n\t    this.onStorage = this.onStorage.bind(this);\n\t    this.onStoriesUpdated = this.onStoriesUpdated.bind(this);\n\t  }\n\t\n\t  // Static, cache-related functions\n\t\n\t  _createClass(StoryStore, [{\n\t    key: 'getState',\n\t    value: function getState() {\n\t      return {\n\t        ids: idCache[this.type],\n\t        stories: storyLists[this.type]\n\t      };\n\t    }\n\t  }, {\n\t    key: 'itemUpdated',\n\t    value: function itemUpdated(item, index) {\n\t      storyLists[this.type][index] = item;\n\t      itemCache[item.id] = item;\n\t    }\n\t\n\t    /**\n\t     * Emit an item id event if a storage key corresponding to an item in the\n\t     * cache has changed.\n\t     */\n\t  }, {\n\t    key: 'onStorage',\n\t    value: function onStorage(e) {\n\t      if (itemCache[e.key]) {\n\t        this.emit(e.key);\n\t      }\n\t    }\n\t\n\t    /**\n\t     * Handle story id snapshots from Firebase.\n\t     */\n\t  }, {\n\t    key: 'onStoriesUpdated',\n\t    value: function onStoriesUpdated(snapshot) {\n\t      idCache[this.type] = snapshot.val();\n\t      populateStoryList(this.type);\n\t      this.emit('update', this.getState());\n\t    }\n\t  }, {\n\t    key: 'start',\n\t    value: function start() {\n\t      firebaseRef = HNService.storiesRef(this.type);\n\t      firebaseRef.on('value', this.onStoriesUpdated);\n\t      window.addEventListener('storage', this.onStorage);\n\t    }\n\t  }, {\n\t    key: 'stop',\n\t    value: function stop() {\n\t      if (firebaseRef !== null) {\n\t        firebaseRef.off();\n\t        firebaseRef = null;\n\t      }\n\t      window.removeEventListener('storage', this.onStorage);\n\t    }\n\t  }]);\n\t\n\t  return StoryStore;\n\t})(EventEmitter);\n\t\n\textend(StoryStore, {\n\t  /**\n\t   * Get an item from the cache.\n\t   */\n\t  getItem: function getItem(id) {\n\t    return itemCache[id] || null;\n\t  },\n\t\n\t  /**\n\t   * Deserialise caches from sessionStorage.\n\t   */\n\t  loadSession: function loadSession() {\n\t    idCache = parseJSON(window.sessionStorage.idCache, {});\n\t    itemCache = parseJSON(window.sessionStorage.itemCache, {});\n\t  },\n\t\n\t  /**\n\t   * Serialise caches to sessionStorage as JSON.\n\t   */\n\t  saveSession: function saveSession() {\n\t    window.sessionStorage.idCache = JSON.stringify(idCache);\n\t    window.sessionStorage.itemCache = JSON.stringify(itemCache);\n\t  }\n\t});\n\t\n\tmodule.exports = StoryStore;\n\n/***/ },\n\n/***/ 41:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar EventEmitter = __webpack_require__(61).EventEmitter;\n\t\n\tvar HNService = __webpack_require__(12);\n\t\n\tvar _require = __webpack_require__(42);\n\t\n\tvar UPDATES_CACHE_SIZE = _require.UPDATES_CACHE_SIZE;\n\t\n\tvar extend = __webpack_require__(31);\n\t\n\t/**\n\t * Firebase reference used to stream updates.\n\t */\n\tvar updatesRef = null;\n\t\n\t/**\n\t * Contains item id -> item cache objects. Persisted to sessionStorage.\n\t * @prop .comments {Object.<id,item>} comments cache.\n\t * @prop .stories {Object.<id,item>} story cache.\n\t */\n\tvar updatesCache = null;\n\t\n\t/**\n\t * Lists of items in reverse chronological order for display.\n\t * @prop .comments {Array.<item>} comment updates.\n\t * @prop .stories {Array.<item>} story updates.\n\t */\n\tvar updates = {};\n\t\n\tfunction sortByTimeDesc(a, b) {\n\t  return b.time - a.time;\n\t}\n\t\n\tfunction cacheObjToSortedArray(obj) {\n\t  var arr = Object.keys(obj).map(function (id) {\n\t    return obj[id];\n\t  });\n\t  arr.sort(sortByTimeDesc);\n\t  return arr;\n\t}\n\t\n\t/**\n\t * Populate lists of updates for display from the cache.\n\t */\n\tfunction populateUpdates() {\n\t  updates.comments = processCacheObj(updatesCache.comments);\n\t  updates.stories = processCacheObj(updatesCache.stories);\n\t}\n\t\n\t/**\n\t * Create an array of items from a cache object, sorted in reverse chronological\n\t * order. Evict the oldest items from the cache if it's grown above\n\t * UPDATES_CACHE_SIZE.\n\t */\n\tfunction processCacheObj(cacheObj) {\n\t  var arr = cacheObjToSortedArray(cacheObj);\n\t  arr.splice(UPDATES_CACHE_SIZE, Math.max(0, arr.length - UPDATES_CACHE_SIZE)).forEach(function (item) {\n\t    delete cacheObj[item.id];\n\t  });\n\t  return arr;\n\t}\n\t\n\t/**\n\t * Lookup to filter out any items which appear in the updates feed which can't\n\t * be displayed by the Updates component.\n\t */\n\tvar updateItemTypes = {\n\t  comment: true,\n\t  job: true,\n\t  poll: true,\n\t  story: true\n\t};\n\t\n\t/**\n\t * Process incoming items from the update stream.\n\t */\n\tfunction handleUpdateItems(items) {\n\t  for (var i = 0, l = items.length; i < l; i++) {\n\t    var item = items[i];\n\t    // Silently ignore deleted items (because irony)\n\t    if (item.deleted) {\n\t      continue;\n\t    }\n\t\n\t    if (typeof updateItemTypes[item.type] == 'undefined') {\n\t      if (false) {\n\t        console.warn(\"An item which can't be displayed by the Updates component was \" + 'received in the updates stream: ' + JSON.stringify(item));\n\t      }\n\t      continue;\n\t    }\n\t\n\t    if (item.type === 'comment') {\n\t      updatesCache.comments[item.id] = item;\n\t    } else {\n\t      updatesCache.stories[item.id] = item;\n\t    }\n\t  }\n\t\n\t  populateUpdates();\n\t  UpdatesStore.emit('updates', updates);\n\t}\n\t\n\tvar UpdatesStore = extend(new EventEmitter(), {\n\t  loadSession: function loadSession() {\n\t    var json = window.sessionStorage.updates;\n\t    updatesCache = json ? JSON.parse(json) : { comments: {}, stories: {} };\n\t    populateUpdates();\n\t  },\n\t\n\t  saveSession: function saveSession() {\n\t    window.sessionStorage.updates = JSON.stringify(updatesCache);\n\t  },\n\t\n\t  start: function start() {\n\t    if (updatesRef === null) {\n\t      updatesRef = HNService.updatesRef();\n\t      updatesRef.on('value', function (snapshot) {\n\t        HNService.fetchItems(snapshot.val(), handleUpdateItems);\n\t      });\n\t    }\n\t  },\n\t\n\t  stop: function stop() {\n\t    updatesRef.off();\n\t    updatesRef = null;\n\t  },\n\t\n\t  getUpdates: function getUpdates() {\n\t    return updates;\n\t  },\n\t\n\t  getItem: function getItem(id) {\n\t    return updatesCache.comments[id] || updatesCache.stories[id] || null;\n\t  },\n\t\n\t  getComment: function getComment(id) {\n\t    return updatesCache.comments[id] || null;\n\t  },\n\t\n\t  getStory: function getStory(id) {\n\t    return updatesCache.stories[id] || null;\n\t  }\n\t});\n\tUpdatesStore.off = UpdatesStore.removeListener;\n\t\n\tmodule.exports = UpdatesStore;\n\n/***/ },\n\n/***/ 42:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t  ITEMS_PER_PAGE: 30,\n\t  SITE_TITLE: 'React HN',\n\t  UPDATES_CACHE_SIZE: 500\n\t};\n\n/***/ },\n\n/***/ 43:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction pluralise(howMany, suffixes) {\n\t  return (suffixes || ',s').split(',')[howMany === 1 ? 0 : 1];\n\t}\n\t\n\tmodule.exports = pluralise;\n\n/***/ },\n\n/***/ 57:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar _require = __webpack_require__(15);\n\t\n\tvar Link = _require.Link;\n\t\n\tvar TimeAgo = __webpack_require__(34);\n\t\n\tvar ItemStore = __webpack_require__(91);\n\tvar SettingsStore = __webpack_require__(8);\n\t\n\tvar Spinner = __webpack_require__(19);\n\t\n\tvar pluralise = __webpack_require__(43);\n\t\n\tvar _ref = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Spinner,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Spinner.defaultProps, {\n\t    size: '20'\n\t  }),\n\t  _owner: null\n\t};\n\tvar _ref2 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'div',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'Unable to load comment  this usually indicates the author has configured a delay. Trying again in 30 seconds.',\n\t    className: 'Comment__text'\n\t  },\n\t  _owner: null\n\t};\n\tvar CommentMixin = {\n\t  fetchAncestors: function fetchAncestors(comment) {\n\t    var _this = this;\n\t\n\t    ItemStore.fetchCommentAncestors(comment, function (result) {\n\t      if (false) {\n\t        console.info('fetchAncestors(' + comment.id + ') took ' + result.timeTaken + ' ms for ' + result.itemCount + ' item' + pluralise(result.itemCount) + ' with ' + result.cacheHits + ' cache hit' + pluralise(result.cacheHits) + ' (' + (result.cacheHits / result.itemCount * 100).toFixed(1) + '%)');\n\t      }\n\t      if (!_this.isMounted()) {\n\t        if (false) {\n\t          console.info(\"...but the comment isn't mounted\");\n\t        }\n\t        // Too late - the comment or the user has moved elsewhere\n\t        return;\n\t      }\n\t      _this.setState({\n\t        parent: result.parent,\n\t        op: result.op\n\t      });\n\t    });\n\t  },\n\t\n\t  renderCommentLoading: function renderCommentLoading(comment) {\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [(this.props.loadingSpinner || comment.delayed) && _ref, comment.delayed && _ref2],\n\t        className: 'Comment Comment--loading Comment--level' + this.props.level\n\t      },\n\t      _owner: null\n\t    };\n\t  },\n\t\n\t  renderCommentDeleted: function renderCommentDeleted(comment, options) {\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'div',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: ['[deleted] | ', {\n\t                  $$typeof: _typeofReactElement,\n\t                  type: 'a',\n\t                  key: null,\n\t                  ref: null,\n\t                  props: {\n\t                    children: 'view on Hacker News',\n\t                    href: 'https://news.ycombinator.com/item?id=' + comment.id\n\t                  },\n\t                  _owner: null\n\t                }],\n\t                className: 'Comment__meta'\n\t              },\n\t              _owner: null\n\t            },\n\t            className: 'Comment__content'\n\t          },\n\t          _owner: null\n\t        },\n\t        className: options.className\n\t      },\n\t      _owner: null\n\t    };\n\t  },\n\t\n\t  renderError: function renderError(comment, options) {\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'div',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: ['[error] | comment is ', JSON.stringify(comment), ' | ', {\n\t                  $$typeof: _typeofReactElement,\n\t                  type: 'a',\n\t                  key: null,\n\t                  ref: null,\n\t                  props: {\n\t                    children: 'view on Hacker News',\n\t                    href: 'https://news.ycombinator.com/item?id=' + options.id\n\t                  },\n\t                  _owner: null\n\t                }],\n\t                className: 'Comment__meta'\n\t              },\n\t              _owner: null\n\t            },\n\t            className: 'Comment__content'\n\t          },\n\t          _owner: null\n\t        },\n\t        className: options.className\n\t      },\n\t      _owner: null\n\t    };\n\t  },\n\t\n\t  renderCollapseControl: function renderCollapseControl(collapsed) {\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'span',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: ['[', collapsed ? '+' : '', ']'],\n\t        className: 'Comment__collapse',\n\t        onClick: this.toggleCollapse,\n\t        onKeyPress: this.toggleCollapse,\n\t        tabIndex: '0'\n\t      },\n\t      _owner: null\n\t    };\n\t  },\n\t\n\t  /**\n\t   * @param options.collapsible {Boolean} if true, assumes this.toggleCollspse()\n\t   * @param options.collapsed {Boolean}\n\t   * @param options.link {Boolean}\n\t   * @param options.parent {Boolean} if true, assumes this.state.parent\n\t   * @param options.op {Boolean} if true, assumes this.state.op\n\t   * @param options.childCounts {Object} with .children and .newComments\n\t   */\n\t  renderCommentMeta: function renderCommentMeta(comment, options) {\n\t    if (comment.dead && !SettingsStore.showDead) {\n\t      return {\n\t        $$typeof: _typeofReactElement,\n\t        type: 'div',\n\t        key: null,\n\t        ref: null,\n\t        props: {\n\t          children: [options.collapsible && this.renderCollapseControl(options.collapsed), options.collapsible && ' ', '[dead]', options.childCounts && ' | (' + options.childCounts.children + ' child' + pluralise(options.childCounts.children, ',ren'), options.childCounts && options.childCounts.newComments > 0 && ', ', options.childCounts && options.childCounts.newComments > 0 && {\n\t            $$typeof: _typeofReactElement,\n\t            type: 'em',\n\t            key: null,\n\t            ref: null,\n\t            props: {\n\t              children: [options.childCounts.newComments, ' new']\n\t            },\n\t            _owner: null\n\t          }, options.childCounts && ')'],\n\t          className: 'Comment__meta'\n\t        },\n\t        _owner: null\n\t      };\n\t    }\n\t\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [options.collapsible && this.renderCollapseControl(options.collapsed), options.collapsible && ' ', {\n\t          $$typeof: _typeofReactElement,\n\t          type: Link,\n\t          key: null,\n\t          ref: null,\n\t          props: _defaultProps(Link.defaultProps, {\n\t            children: comment.by,\n\t            to: '/user/' + comment.by,\n\t            className: 'Comment__user'\n\t          }),\n\t          _owner: null\n\t        }, ' ', {\n\t          $$typeof: _typeofReactElement,\n\t          type: TimeAgo,\n\t          key: null,\n\t          ref: null,\n\t          props: _defaultProps(TimeAgo.defaultProps, {\n\t            date: comment.time * 1000\n\t          }),\n\t          _owner: null\n\t        }, options.link && ' | ', options.link && {\n\t          $$typeof: _typeofReactElement,\n\t          type: Link,\n\t          key: null,\n\t          ref: null,\n\t          props: _defaultProps(Link.defaultProps, {\n\t            children: 'link',\n\t            to: '/comment/' + comment.id\n\t          }),\n\t          _owner: null\n\t        }, options.parent && ' | ', options.parent && {\n\t          $$typeof: _typeofReactElement,\n\t          type: Link,\n\t          key: null,\n\t          ref: null,\n\t          props: _defaultProps(Link.defaultProps, {\n\t            children: 'parent',\n\t            to: '/' + this.state.parent.type + '/' + comment.parent\n\t          }),\n\t          _owner: null\n\t        }, options.op && ' | on: ', options.op && {\n\t          $$typeof: _typeofReactElement,\n\t          type: Link,\n\t          key: null,\n\t          ref: null,\n\t          props: _defaultProps(Link.defaultProps, {\n\t            children: this.state.op.title,\n\t            to: '/' + this.state.op.type + '/' + this.state.op.id\n\t          }),\n\t          _owner: null\n\t        }, comment.dead && ' | [dead]', options.childCounts && ' | (' + options.childCounts.children + ' child' + pluralise(options.childCounts.children, ',ren'), options.childCounts && options.childCounts.newComments > 0 && ', ', options.childCounts && options.childCounts.newComments > 0 && {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'em',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: [options.childCounts.newComments, ' new']\n\t          },\n\t          _owner: null\n\t        }, options.childCounts && ')'],\n\t        className: 'Comment__meta'\n\t      },\n\t      _owner: null\n\t    };\n\t  },\n\t\n\t  renderCommentText: function renderCommentText(comment, options) {\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [!comment.dead || SettingsStore.showDead ? {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            dangerouslySetInnerHTML: { __html: comment.text }\n\t          },\n\t          _owner: null\n\t        } : '[dead]', SettingsStore.replyLinks && options.replyLink && !comment.dead && {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'p',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'a',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: 'reply',\n\t                href: 'https://news.ycombinator.com/reply?id=' + comment.id\n\t              },\n\t              _owner: null\n\t            }\n\t          },\n\t          _owner: null\n\t        }],\n\t        className: 'Comment__text'\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t};\n\t\n\tmodule.exports = CommentMixin;\n\n/***/ },\n\n/***/ 58:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar _require = __webpack_require__(15);\n\t\n\tvar Link = _require.Link;\n\t\n\tvar TimeAgo = __webpack_require__(34);\n\t\n\tvar SettingsStore = __webpack_require__(8);\n\tvar pluralise = __webpack_require__(43);\n\t\n\tvar parseHost = (function () {\n\t  var a = document.createElement('a');\n\t  return function (url) {\n\t    a.href = url;\n\t    var parts = a.hostname.split('.').slice(-3);\n\t    if (parts[0] === 'www') {\n\t      parts.shift();\n\t    }\n\t    return parts.join('.');\n\t  };\n\t})();\n\t\n\t/**\n\t * Reusable logic for displaying an item.\n\t */\n\tvar ItemMixin = {\n\t  /**\n\t   * Render an item's metadata bar.\n\t   */\n\t  renderItemMeta: function renderItemMeta(item, extraContent) {\n\t    var itemDate = new Date(item.time * 1000);\n\t\n\t    if (item.type === 'job') {\n\t      return {\n\t        $$typeof: _typeofReactElement,\n\t        type: 'div',\n\t        key: null,\n\t        ref: null,\n\t        props: {\n\t          children: {\n\t            $$typeof: _typeofReactElement,\n\t            type: TimeAgo,\n\t            key: null,\n\t            ref: null,\n\t            props: _defaultProps(TimeAgo.defaultProps, {\n\t              date: itemDate,\n\t              className: 'Item__time'\n\t            }),\n\t            _owner: null\n\t          },\n\t          className: 'Item__meta'\n\t        },\n\t        _owner: null\n\t      };\n\t    }\n\t\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [{\n\t          $$typeof: _typeofReactElement,\n\t          type: 'span',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: [item.score, ' point', pluralise(item.score)],\n\t            className: 'Item__score'\n\t          },\n\t          _owner: null\n\t        }, ' ', {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'span',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: ['by ', {\n\t              $$typeof: _typeofReactElement,\n\t              type: Link,\n\t              key: null,\n\t              ref: null,\n\t              props: _defaultProps(Link.defaultProps, {\n\t                children: item.by,\n\t                to: '/user/' + item.by\n\t              }),\n\t              _owner: null\n\t            }],\n\t            className: 'Item__by'\n\t          },\n\t          _owner: null\n\t        }, ' ', {\n\t          $$typeof: _typeofReactElement,\n\t          type: TimeAgo,\n\t          key: null,\n\t          ref: null,\n\t          props: _defaultProps(TimeAgo.defaultProps, {\n\t            date: itemDate,\n\t            className: 'Item__time'\n\t          }),\n\t          _owner: null\n\t        }, ' | ', {\n\t          $$typeof: _typeofReactElement,\n\t          type: Link,\n\t          key: null,\n\t          ref: null,\n\t          props: _defaultProps(Link.defaultProps, {\n\t            children: item.descendants > 0 ? item.descendants + ' comment' + pluralise(item.descendants) : 'discuss',\n\t            to: '/' + item.type + '/' + item.id\n\t          }),\n\t          _owner: null\n\t        }, extraContent],\n\t        className: 'Item__meta'\n\t      },\n\t      _owner: null\n\t    };\n\t  },\n\t\n\t  /**\n\t   * Render an item's title bar.\n\t   */\n\t  renderItemTitle: function renderItemTitle(item) {\n\t    var hasURL = !!item.url;\n\t    var title;\n\t    if (item.dead) {\n\t      title = '[dead] ' + item.title;\n\t    } else {\n\t      title = hasURL ? {\n\t        $$typeof: _typeofReactElement,\n\t        type: 'a',\n\t        key: null,\n\t        ref: null,\n\t        props: {\n\t          children: item.title,\n\t          href: item.url\n\t        },\n\t        _owner: null\n\t      } : {\n\t        $$typeof: _typeofReactElement,\n\t        type: Link,\n\t        key: null,\n\t        ref: null,\n\t        props: _defaultProps(Link.defaultProps, {\n\t          children: item.title,\n\t          to: '/' + item.type + '/' + item.id\n\t        }),\n\t        _owner: null\n\t      };\n\t    }\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [title, hasURL && ' ', hasURL && {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'span',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: ['(', parseHost(item.url), ')'],\n\t            className: 'Item__host'\n\t          },\n\t          _owner: null\n\t        }],\n\t        className: 'Item__title',\n\t        style: { fontSize: SettingsStore.titleFontSize }\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t};\n\t\n\tmodule.exports = ItemMixin;\n\n/***/ },\n\n/***/ 59:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar extend = __webpack_require__(31);\n\t\n\tfunction CommentThreadStore(item, onCommentsChanged) {\n\t  this.itemId = item.id;\n\t  this.onCommentsChanged = onCommentsChanged;\n\t\n\t  /**\n\t   * Lookup from a comment id to its child comment ids.\n\t   * @type {Object.<id,Array.<Number>>}\n\t   */\n\t  this.children = {};\n\t  this.children[item.id] = [];\n\t\n\t  /**\n\t   * Lookup for new comment ids. Will only contain true.\n\t   * @type {Object.<id,Boolean>}\n\t   */\n\t  this.isNew = {};\n\t\n\t  /**\n\t   * Lookup for collapsed state of comment ids. May contain true or false.\n\t   * @type {Object.<id,Boolean>}\n\t   */\n\t  this.isCollapsed = {};\n\t}\n\t\n\textend(CommentThreadStore.prototype, {\n\t  /**\n\t   * Get counts of children and new comments under the given comment.\n\t   * @return .children {Number}\n\t   * @return .newComments {Number}\n\t   */\n\t  getChildCounts: function getChildCounts(comment) {\n\t    var childCount = 0;\n\t    var newCommentCount = 0;\n\t    var nodes = [comment.id];\n\t\n\t    while (nodes.length) {\n\t      var nextNodes = [];\n\t      for (var i = 0, l = nodes.length; i < l; i++) {\n\t        var nodeChildren = this.children[nodes[i]];\n\t        if (nodeChildren.length) {\n\t          nextNodes.push.apply(nextNodes, nodeChildren);\n\t        }\n\t      }\n\t      for (i = 0, l = nextNodes.length; i < l; i++) {\n\t        if (this.isNew[nextNodes[i]]) {\n\t          newCommentCount++;\n\t        }\n\t      }\n\t      childCount += nextNodes.length;\n\t      nodes = nextNodes;\n\t    }\n\t\n\t    return {\n\t      children: childCount,\n\t      newComments: newCommentCount\n\t    };\n\t  },\n\t\n\t  /**\n\t   * Register a comment's appearance in the thread.\n\t   */\n\t  commentAdded: function commentAdded(comment) {\n\t    if (comment.deleted) {\n\t      return;\n\t    }\n\t\n\t    this.children[comment.id] = [];\n\t    this.children[comment.parent].push(comment.id);\n\t  },\n\t\n\t  /**\n\t   * Register a comment's deletion from the thread.\n\t   */\n\t  commentDeleted: function commentDeleted(comment) {\n\t    // Comments which initially failed to load (null from Firebase API) can be\n\t    // deleted by the time the API catches up.\n\t    if (!comment) {\n\t      return;\n\t    }\n\t\n\t    var siblings = this.children[comment.parent];\n\t    siblings.splice(siblings.indexOf(comment.id), 1);\n\t  },\n\t\n\t  toggleCollapse: function toggleCollapse(commentId) {\n\t    this.isCollapsed[commentId] = !this.isCollapsed[commentId];\n\t    this.onCommentsChanged({ type: 'collapse' });\n\t  }\n\t});\n\t\n\tmodule.exports = CommentThreadStore;\n\n/***/ },\n\n/***/ 60:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar CommentThreadStore = __webpack_require__(59);\n\tvar SettingsStore = __webpack_require__(8);\n\t\n\tvar debounce = __webpack_require__(156);\n\tvar extend = __webpack_require__(31);\n\tvar pluralise = __webpack_require__(43);\n\tvar storage = __webpack_require__(93);\n\t\n\t/**\n\t * Load persisted comment thread state.\n\t * @return .lastVisit {Date} null if the item hasn't been visited before.\n\t * @return .commentCount {Number} 0 if the item hasn't been visited before.\n\t * @return .maxCommentId {Number} 0 if the item hasn't been visited before.\n\t */\n\tfunction loadState(itemId) {\n\t  var json = storage.get(itemId);\n\t  if (json) {\n\t    return JSON.parse(json);\n\t  }\n\t  return {\n\t    lastVisit: null,\n\t    commentCount: 0,\n\t    maxCommentId: 0\n\t  };\n\t}\n\t\n\tfunction StoryCommentThreadStore(item, onCommentsChanged, options) {\n\t  CommentThreadStore.call(this, item, onCommentsChanged);\n\t  this.startedLoading = Date.now();\n\t\n\t  /** Lookup from a comment id to its parent comment id. */\n\t  this.parents = {};\n\t  /** The number of comments which have loaded. */\n\t  this.commentCount = 0;\n\t  /** The number of new comments which have loaded. */\n\t  this.newCommentCount = 0;\n\t  /** The max comment id seen by the store. */\n\t  this.maxCommentId = 0;\n\t  /** Has the comment thread finished loading? */\n\t  this.loading = true;\n\t  /** The number of comments we're expecting to load. */\n\t  this.expectedComments = item.kids ? item.kids.length : 0;\n\t  /**\n\t   * The number of descendants the story has according to the API.\n\t   * This count includes deleted comments, which aren't accessible via the API,\n\t   * so a thread with deleted comments (example story id: 9273709) will never\n\t   * load this number of comments\n\t   * However, we still need to persist the last known descendant count in order\n\t   * to determine how many new comments there are when displaying the story on a\n\t   * list page.\n\t   */\n\t  this.itemDescendantCount = item.descendants;\n\t\n\t  var initialState = loadState(item.id);\n\t  /** Time of last visit to the story. */\n\t  this.lastVisit = initialState.lastVisit;\n\t  /** Max comment id on the last visit - determines which comments are new. */\n\t  this.prevMaxCommentId = initialState.maxCommentId;\n\t  /** Is this the user's first time viewing the story? */\n\t  this.isFirstVisit = initialState.lastVisit === null;\n\t\n\t  // Trigger an immediate check for thread load completion if the item was not\n\t  // retrieved from the cache, so is the latest version. This completes page\n\t  // loading immediately for items which have no comments yet.\n\t  if (!options.cached) {\n\t    this.checkLoadCompletion();\n\t  }\n\t}\n\t\n\tStoryCommentThreadStore.loadState = loadState;\n\t\n\tStoryCommentThreadStore.prototype = extend(Object.create(CommentThreadStore.prototype), {\n\t  constructor: StoryCommentThreadStore,\n\t\n\t  /**\n\t   * Callback to the item component with updated comment counts, debounced as\n\t   * comments will be loading frequently on initial load.\n\t   */\n\t  numberOfCommentsChanged: debounce(function () {\n\t    this.onCommentsChanged({ type: 'number' });\n\t  }, 123),\n\t\n\t  /**\n\t   * If we don't have a last visit time stored for an item, it must have been\n\t   * visited for the first time. Once it finishes loading, establish the last\n\t   * visit time and max comment id which will be used to track and display new\n\t   * comments.\n\t   */\n\t  firstLoadComplete: function firstLoadComplete() {\n\t    this.lastVisit = Date.now();\n\t    this.prevMaxCommentId = this.maxCommentId;\n\t    this.isFirstVisit = false;\n\t    this.onCommentsChanged({ type: 'first_load_complete' });\n\t  },\n\t\n\t  /**\n\t   * Check whether the number of comments has reached the expected number yet.\n\t   */\n\t  checkLoadCompletion: function checkLoadCompletion() {\n\t    if (this.loading && this.commentCount >= this.expectedComments) {\n\t      if (false) {\n\t        console.info('Initial load of ' + this.commentCount + ' comment' + pluralise(this.commentCount) + ' for ' + this.itemId + ' took ' + ((Date.now() - this.startedLoading) / 1000).toFixed(2) + 's');\n\t      }\n\t      this.loading = false;\n\t      if (this.isFirstVisit) {\n\t        this.firstLoadComplete();\n\t      } else if (SettingsStore.autoCollapse && this.newCommentCount > 0) {\n\t        this.collapseThreadsWithoutNewComments();\n\t      }\n\t      this._storeState();\n\t    }\n\t  },\n\t\n\t  /**\n\t   * Persist comment thread state.\n\t   */\n\t  _storeState: function _storeState() {\n\t    storage.set(this.itemId, JSON.stringify({\n\t      lastVisit: Date.now(),\n\t      commentCount: this.itemDescendantCount,\n\t      maxCommentId: this.maxCommentId\n\t    }));\n\t  },\n\t\n\t  /**\n\t   * The item this comment thread belongs to got updated.\n\t   */\n\t  itemUpdated: function itemUpdated(item) {\n\t    this.itemDescendantCount = item.descendants;\n\t  },\n\t\n\t  /**\n\t   * A comment got loaded initially or added later.\n\t   */\n\t  commentAdded: function commentAdded(comment) {\n\t    // Deleted comments don't count towards the comment count\n\t    if (comment.deleted) {\n\t      // Adjust the number of comments expected during the initial page load.\n\t      if (this.loading) {\n\t        this.expectedComments--;\n\t        this.checkLoadCompletion();\n\t      }\n\t      return;\n\t    }\n\t\n\t    CommentThreadStore.prototype.commentAdded.call(this, comment);\n\t\n\t    // Dead comments don't contribute to the comment count if showDead is off\n\t    if (comment.dead && !SettingsStore.showDead) {\n\t      this.expectedComments--;\n\t    } else {\n\t      this.commentCount++;\n\t    }\n\t    // Add the number of kids the comment has to the expected total for the\n\t    // initial load.\n\t    if (this.loading && comment.kids) {\n\t      this.expectedComments += comment.kids.length;\n\t    }\n\t    // Register the comment as new if it's new, unless it's dead and showDead is off\n\t    if (this.prevMaxCommentId > 0 && comment.id > this.prevMaxCommentId && (!comment.dead || SettingsStore.showDead)) {\n\t      this.newCommentCount++;\n\t      this.isNew[comment.id] = true;\n\t    }\n\t    // Keep track of the biggest comment id seen\n\t    if (comment.id > this.maxCommentId) {\n\t      this.maxCommentId = comment.id;\n\t    }\n\t    // We don't want the story to be part of the comment parent hierarchy\n\t    if (comment.parent !== this.itemId) {\n\t      this.parents[comment.id] = comment.parent;\n\t    }\n\t\n\t    this.numberOfCommentsChanged();\n\t    if (this.loading) {\n\t      this.checkLoadCompletion();\n\t    }\n\t  },\n\t\n\t  /**\n\t   * A comment which hasn't loaded yet is being delayed.\n\t   */\n\t  commentDelayed: function commentDelayed(commentId) {\n\t    // Don't wait for delayed comments\n\t    this.expectedComments--;\n\t  },\n\t\n\t  /**\n\t   * A comment which wasn't previously deleted became deleted.\n\t   */\n\t  commentDeleted: function commentDeleted(comment) {\n\t    CommentThreadStore.prototype.commentDeleted.call(this, comment);\n\t    this.commentCount--;\n\t    if (this.isNew[comment.id]) {\n\t      this.newCommentCount--;\n\t      delete this.isNew[comment.id];\n\t    }\n\t    delete this.parents[comment.id];\n\t    // Trigger debounced callbacks\n\t    this.numberOfCommentsChanged();\n\t  },\n\t\n\t  /**\n\t   * A comment which wasn't previously dead became dead.\n\t   */\n\t  commentDied: function commentDied(comment) {\n\t    if (!SettingsStore.showDead) {\n\t      this.commentCount--;\n\t      if (this.isNew[comment.id]) {\n\t        this.newCommentCount--;\n\t        delete this.isNew[comment.id];\n\t      }\n\t    }\n\t  },\n\t\n\t  /**\n\t   * Change the expected number of comments if an update was received during\n\t   * initial loding and trigger a re-check of loading completion.\n\t   */\n\t  adjustExpectedComments: function adjustExpectedComments(change) {\n\t    this.expectedComments += change;\n\t    this.checkLoadCompletion();\n\t  },\n\t\n\t  collapseThreadsWithoutNewComments: function collapseThreadsWithoutNewComments() {\n\t    // Create an id lookup for comments which have a new comment as one of their\n\t    // descendants. New comments themselves are not added to the lookup.\n\t    var newCommentIds = Object.keys(this.isNew);\n\t    var hasNewComments = {};\n\t    for (var i = 0, l = newCommentIds.length; i < l; i++) {\n\t      var parent = this.parents[newCommentIds[i]];\n\t      while (parent) {\n\t        // Stop when we hit one we've seen before\n\t        if (hasNewComments[parent]) {\n\t          break;\n\t        }\n\t        hasNewComments[parent] = true;\n\t        parent = this.parents[parent];\n\t      }\n\t    }\n\t\n\t    // Walk the tree of comments one level at a time, only walking children to\n\t    // comments we know have new comment descendants, to find subtrees which\n\t    // don't have new comments.\n\t    // Other comments are marked for collapsing unless they are themselves a\n\t    // new comment (in which case all their replies must be new too).\n\t    var shouldCollapse = {};\n\t    var commentIds = this.children[this.itemId];\n\t    while (commentIds.length) {\n\t      var nextCommentIds = [];\n\t      for (i = 0, l = commentIds.length; i < l; i++) {\n\t        var commentId = commentIds[i];\n\t        if (!hasNewComments[commentId]) {\n\t          if (!this.isNew[commentId]) {\n\t            shouldCollapse[commentId] = true;\n\t          }\n\t        } else {\n\t          var childCommentIds = this.children[commentId];\n\t          if (childCommentIds.length) {\n\t            nextCommentIds.push.apply(nextCommentIds, childCommentIds);\n\t          }\n\t        }\n\t      }\n\t      commentIds = nextCommentIds;\n\t    }\n\t\n\t    this.isCollapsed = shouldCollapse;\n\t    this.onCommentsChanged({ type: 'collapse' });\n\t  },\n\t\n\t  /**\n\t   * Merk the thread as read.\n\t   */\n\t  markAsRead: function markAsRead() {\n\t    this.lastVisit = Date.now();\n\t    this.newCommentCount = 0;\n\t    this.prevMaxCommentId = this.maxCommentId;\n\t    this.isNew = {};\n\t    this._storeState();\n\t  },\n\t\n\t  /**\n\t   * Persist comment thread state and perform any necessary internal cleanup.\n\t   */\n\t  dispose: function dispose() {\n\t    // Cancel debounced callbacks in case any are pending\n\t    this.numberOfCommentsChanged.cancel();\n\t    this._storeState();\n\t  }\n\t});\n\t\n\tmodule.exports = StoryCommentThreadStore;\n\n/***/ },\n\n/***/ 87:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\tvar ReactFireMixin = __webpack_require__(25);\n\t\n\tvar CommentThreadStore = __webpack_require__(59);\n\tvar HNService = __webpack_require__(12);\n\tvar SettingsStore = __webpack_require__(8);\n\t\n\tvar CommentMixin = __webpack_require__(57);\n\t\n\tvar cx = __webpack_require__(30);\n\t\n\t/**\n\t * A comment in a thread.\n\t */\n\tvar Comment = React.createClass({\n\t  displayName: 'Comment',\n\t\n\t  mixins: [CommentMixin, ReactFireMixin],\n\t\n\t  propTypes: {\n\t    id: React.PropTypes.number.isRequired,\n\t    level: React.PropTypes.number.isRequired,\n\t    loadingSpinner: React.PropTypes.bool,\n\t    threadStore: React.PropTypes.instanceOf(CommentThreadStore).isRequired\n\t  },\n\t\n\t  getDefaultProps: function getDefaultProps() {\n\t    return {\n\t      loadingSpinner: false\n\t    };\n\t  },\n\t\n\t  getInitialState: function getInitialState() {\n\t    return {\n\t      comment: {}\n\t    };\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    this.bindFirebaseRef();\n\t  },\n\t\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    this.clearDelayTimeout();\n\t  },\n\t\n\t  componentDidUpdate: function componentDidUpdate(prevProps, prevState) {\n\t    // Huge, fast-growing threads like https://news.ycombinator.com/item?id=9784470\n\t    // seem to break the API - some comments are coming back from Firebase as null.\n\t    if (!this.state.comment) {\n\t      this.props.threadStore.adjustExpectedComments(-1);\n\t      return;\n\t    }\n\t\n\t    // On !prevState.comment: a comment which was initially null - see\n\t    // above - may eventually load when the API catches up.\n\t    if (!prevState.comment || !prevState.comment.id) {\n\t      // Register a newly-loaded comment with the thread store\n\t      if (this.state.comment.id) {\n\t        // If the comment was delayed, cancel any pending timeout\n\t        if (prevState.comment && prevState.comment.delayed) {\n\t          this.clearDelayTimeout();\n\t        }\n\t        this.props.threadStore.commentAdded(this.state.comment);\n\t      }\n\t      if (prevState.comment && !prevState.comment.delayed && this.state.comment.delayed) {\n\t        this.props.threadStore.commentDelayed(this.props.id);\n\t      }\n\t    }\n\t    // The comment was already loaded, look for changes to it\n\t    else {\n\t        if (!prevState.comment.deleted && this.state.comment.deleted) {\n\t          this.props.threadStore.commentDeleted(this.state.comment);\n\t        }\n\t        if (!prevState.comment.dead && this.state.comment.dead) {\n\t          this.props.threadStore.commentDied(this.state.comment);\n\t        }\n\t        // If the comment has been updated and the initial set of comments is\n\t        // still loading, the number of expected comments might need to be\n\t        // adjusted.\n\t        else if (prevState.comment !== this.state.comment && this.props.threadStore.loading) {\n\t            var kids = this.state.comment.kids ? this.state.comment.kids.length : 0;\n\t            var prevKids = prevState.comment.kids ? prevState.comment.kids.length : 0;\n\t            this.props.threadStore.adjustExpectedComments(kids - prevKids);\n\t          }\n\t      }\n\t  },\n\t\n\t  bindFirebaseRef: function bindFirebaseRef() {\n\t    this.bindAsObject(HNService.itemRef(this.props.id), 'comment', this.handleFirebaseRefCancelled);\n\t    if (this.timeout) {\n\t      this.timeout = null;\n\t    }\n\t  },\n\t\n\t  /**\n\t   * This is usually caused by a permissions error loading the comment due to\n\t   * its author using the delay setting (note: this is conjecture), which is\n\t   * measured in minutes - try again in 30 seconds.\n\t   */\n\t  handleFirebaseRefCancelled: function handleFirebaseRefCancelled(e) {\n\t    if (false) {\n\t      console.error('Firebase ref for comment ' + this.props.id + ' was cancelled: ' + e.message);\n\t    }\n\t    this.unbind('comment');\n\t    this.timeout = setTimeout(this.bindFirebaseRef, 30000);\n\t    if (this.state.comment && !this.state.comment.delayed) {\n\t      this.state.comment.delayed = true;\n\t      this.forceUpdate();\n\t    }\n\t  },\n\t\n\t  clearDelayTimeout: function clearDelayTimeout() {\n\t    if (this.timeout) {\n\t      clearTimeout(this.timeout);\n\t      this.timeout = null;\n\t    }\n\t  },\n\t\n\t  toggleCollapse: function toggleCollapse(e) {\n\t    e.preventDefault();\n\t    this.props.threadStore.toggleCollapse(this.state.comment.id);\n\t  },\n\t\n\t  render: function render() {\n\t    var comment = this.state.comment;\n\t    var props = this.props;\n\t    if (!comment) {\n\t      return this.renderError(comment, {\n\t        id: this.props.id,\n\t        className: 'Comment Comment--error Comment--level' + props.level\n\t      });\n\t    }\n\t    // Render a placeholder while we're waiting for the comment to load\n\t    if (!comment.id) {\n\t      return this.renderCommentLoading(comment);\n\t    }\n\t    // Don't show dead coments or their children, when configured\n\t    if (comment.dead && !SettingsStore.showDead) {\n\t      return null;\n\t    }\n\t    // Render a link to HN for deleted comments if they're being displayed\n\t    if (comment.deleted) {\n\t      if (!SettingsStore.showDeleted) {\n\t        return null;\n\t      }\n\t      return this.renderCommentDeleted(comment, {\n\t        className: 'Comment Comment--deleted Comment--level' + props.level\n\t      });\n\t    }\n\t\n\t    var isNew = props.threadStore.isNew[comment.id];\n\t    var collapsed = !!props.threadStore.isCollapsed[comment.id];\n\t    var childCounts = collapsed && props.threadStore.getChildCounts(comment);\n\t    if (collapsed && isNew) {\n\t      childCounts.newComments = 0;\n\t    }\n\t    var className = cx('Comment Comment--level' + props.level, {\n\t      'Comment--collapsed': collapsed,\n\t      'Comment--dead': comment.dead,\n\t      'Comment--new': isNew\n\t    });\n\t\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [{\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: [this.renderCommentMeta(comment, {\n\t              collapsible: true,\n\t              collapsed: collapsed,\n\t              link: true,\n\t              childCounts: childCounts\n\t            }), this.renderCommentText(comment, { replyLink: true })],\n\t            className: 'Comment__content'\n\t          },\n\t          _owner: null\n\t        }, comment.kids && {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: comment.kids.map(function (id) {\n\t              return {\n\t                $$typeof: _typeofReactElement,\n\t                type: Comment,\n\t                key: id,\n\t                ref: null,\n\t                props: _defaultProps(Comment.defaultProps, {\n\t                  id: id,\n\t                  level: props.level + 1,\n\t                  loadingSpinner: props.loadingSpinner,\n\t                  threadStore: props.threadStore\n\t                }),\n\t                _owner: null\n\t              };\n\t            }),\n\t            className: 'Comment__kids'\n\t          },\n\t          _owner: null\n\t        }],\n\t        className: className\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t});\n\t\n\tmodule.exports = Comment;\n\n/***/ },\n\n/***/ 88:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar _require = __webpack_require__(15);\n\t\n\tvar Link = _require.Link;\n\t\n\tvar Paginator = React.createClass({\n\t  displayName: 'Paginator',\n\t\n\t  _onClick: function _onClick(e) {\n\t    setTimeout(function () {\n\t      window.scrollTo(0, 0);\n\t    }, 0);\n\t  },\n\t\n\t  render: function render() {\n\t    if (this.props.page === 1 && !this.props.hasNext) {\n\t      return null;\n\t    }\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [this.props.page > 1 && {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'span',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: {\n\t              $$typeof: _typeofReactElement,\n\t              type: Link,\n\t              key: null,\n\t              ref: null,\n\t              props: _defaultProps(Link.defaultProps, {\n\t                children: 'Prev',\n\t                to: '/' + this.props.route,\n\t                query: { page: this.props.page - 1 },\n\t                onClick: this._onClick\n\t              }),\n\t              _owner: null\n\t            },\n\t            className: 'Paginator__prev'\n\t          },\n\t          _owner: null\n\t        }, this.props.page > 1 && this.props.hasNext && ' | ', this.props.hasNext && {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'span',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: {\n\t              $$typeof: _typeofReactElement,\n\t              type: Link,\n\t              key: null,\n\t              ref: null,\n\t              props: _defaultProps(Link.defaultProps, {\n\t                children: 'More',\n\t                to: '/' + this.props.route,\n\t                query: { page: this.props.page + 1 },\n\t                onClick: this._onClick\n\t              }),\n\t              _owner: null\n\t            },\n\t            className: 'Paginator__next'\n\t          },\n\t          _owner: null\n\t        }],\n\t        className: 'Paginator'\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t});\n\t\n\tmodule.exports = Paginator;\n\n/***/ },\n\n/***/ 89:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar _require = __webpack_require__(15);\n\t\n\tvar Link = _require.Link;\n\t\n\tvar SettingsStore = __webpack_require__(8);\n\tvar cx = __webpack_require__(30);\n\t\n\t/**\n\t * Reusable logic for displaying an item in a list.\n\t * Must be used in conjunction with ItemMixin for its rendering methods.\n\t */\n\tvar ListItemMixin = {\n\t  getNewCommentCount: function getNewCommentCount(item, threadState) {\n\t    if (threadState.lastVisit === null) {\n\t      return 0;\n\t    }\n\t    return item.descendants - threadState.commentCount;\n\t  },\n\t\n\t  renderListItem: function renderListItem(item, threadState) {\n\t    if (item.deleted) {\n\t      return null;\n\t    }\n\t    var newCommentCount = this.getNewCommentCount(item, threadState);\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'li',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [this.renderItemTitle(item), this.renderItemMeta(item, newCommentCount > 0 && {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'span',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: [' ', '(', {\n\t              $$typeof: _typeofReactElement,\n\t              type: Link,\n\t              key: null,\n\t              ref: null,\n\t              props: _defaultProps(Link.defaultProps, {\n\t                children: [newCommentCount, ' new'],\n\t                to: '/' + item.type + '/' + item.id\n\t              }),\n\t              _owner: null\n\t            }, ')'],\n\t            className: 'ListItem__newcomments'\n\t          },\n\t          _owner: null\n\t        })],\n\t        className: cx('ListItem', { 'ListItem--dead': item.dead }),\n\t        style: { marginBottom: SettingsStore.listSpacing }\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t};\n\t\n\tmodule.exports = ListItemMixin;\n\n/***/ },\n\n/***/ 90:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar PageNumberMixin = {\n\t  getPageNumber: function getPageNumber(page) {\n\t    if (typeof page == 'undefined') {\n\t      page = this.props.location.query.page;\n\t    }\n\t    return page && /^\\d+$/.test(page) ? Math.max(1, Number(page)) : 1;\n\t  }\n\t};\n\t\n\tmodule.exports = PageNumberMixin;\n\n/***/ },\n\n/***/ 91:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate) {'use strict';\n\t\n\tvar HNService = __webpack_require__(12);\n\t\n\tvar StoryStore = __webpack_require__(40);\n\tvar UpdatesStore = __webpack_require__(41);\n\t\n\tvar commentParentLookup = {};\n\tvar titleCache = {};\n\t\n\tfunction fetchCommentParent(comment, cb, result) {\n\t  var commentId = comment.id;\n\t  var parentId = comment.parent;\n\t\n\t  while (commentParentLookup[parentId] || titleCache[parentId]) {\n\t    // We just saved ourselves an item fetch\n\t    result.itemCount++;\n\t    result.cacheHits++;\n\t\n\t    // The parent is a known non-comment\n\t    if (titleCache[parentId]) {\n\t      if (result.itemCount === 1) {\n\t        result.parent = titleCache[parentId];\n\t      }\n\t      result.op = titleCache[parentId];\n\t      cb(result);\n\t      return;\n\t    }\n\t\n\t    // The parent is a known comment\n\t    if (commentParentLookup[parentId]) {\n\t      if (result.itemCount === 1) {\n\t        result.parent = { id: parentId, type: 'comment' };\n\t      }\n\t      // Set the parent comment's ids up for the next iteration\n\t      commentId = parentId;\n\t      parentId = commentParentLookup[parentId];\n\t    }\n\t  }\n\t\n\t  // The parent of the current comment isn't known, so we'll have to fetch it\n\t  ItemStore.getItem(parentId, function (parent) {\n\t    result.itemCount++;\n\t    // Add the current comment's parent to the lookup for next time\n\t    commentParentLookup[commentId] = parentId;\n\t    if (parent.type === 'comment') {\n\t      commentParentLookup[parent.id] = parent.parent;\n\t    }\n\t    processCommentParent(parent, cb, result);\n\t  }, result);\n\t}\n\t\n\tfunction processCommentParent(item, cb, result) {\n\t  if (result.itemCount === 1) {\n\t    result.parent = item;\n\t  }\n\t  if (item.type !== 'comment') {\n\t    result.op = item;\n\t    titleCache[item.id] = {\n\t      id: item.id,\n\t      type: item.type,\n\t      title: item.title\n\t    };\n\t    cb(result);\n\t  } else {\n\t    fetchCommentParent(item, cb, result);\n\t  }\n\t}\n\t\n\tvar ItemStore = {\n\t  getItem: function getItem(id, cb, result) {\n\t    var cachedItem = this.getCachedItem(id);\n\t    if (cachedItem) {\n\t      if (result) {\n\t        result.cacheHits++;\n\t      }\n\t      setImmediate(cb, cachedItem);\n\t    } else {\n\t      HNService.fetchItem(id, cb);\n\t    }\n\t  },\n\t\n\t  getCachedItem: function getCachedItem(id) {\n\t    return StoryStore.getItem(id) || UpdatesStore.getItem(id) || null;\n\t  },\n\t\n\t  getCachedStory: function getCachedStory(id) {\n\t    return StoryStore.getItem(id) || UpdatesStore.getStory(id) || null;\n\t  },\n\t\n\t  fetchCommentAncestors: function fetchCommentAncestors(comment, cb) {\n\t    var startTime = Date.now();\n\t    var result = { itemCount: 0, cacheHits: 0 };\n\t    fetchCommentParent(comment, function () {\n\t      result.timeTaken = Date.now() - startTime;\n\t      setImmediate(cb, result);\n\t    }, result);\n\t  }\n\t};\n\t\n\tmodule.exports = ItemStore;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(56).setImmediate))\n\n/***/ },\n\n/***/ 92:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tfunction pageCalc(pageNum, pageSize, numItems) {\n\t  var startIndex = (pageNum - 1) * pageSize;\n\t  var endIndex = Math.min(numItems, startIndex + pageSize);\n\t  var hasNext = endIndex < numItems - 1;\n\t  return { pageNum: pageNum, startIndex: startIndex, endIndex: endIndex, hasNext: hasNext };\n\t}\n\t\n\tmodule.exports = pageCalc;\n\n/***/ },\n\n/***/ 93:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t  get: function get(key, defaultValue) {\n\t    var value = window.localStorage[key];\n\t    return typeof value != 'undefined' ? value : defaultValue;\n\t  },\n\t  set: function set(key, value) {\n\t    window.localStorage[key] = value;\n\t  }\n\t};\n\n/***/ },\n\n/***/ 143:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar _require = __webpack_require__(15);\n\t\n\tvar Link = _require.Link;\n\t\n\tvar Settings = __webpack_require__(150);\n\t\n\tvar StoryStore = __webpack_require__(40);\n\tvar UpdatesStore = __webpack_require__(41);\n\tvar SettingsStore = __webpack_require__(8);\n\t\n\tvar _ref = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'img',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    src: 'logo.png',\n\t    width: '16',\n\t    height: '16',\n\t    alt: ''\n\t  },\n\t  _owner: null\n\t};\n\tvar _ref2 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Link,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Link.defaultProps, {\n\t    children: 'React HN',\n\t    to: '/news',\n\t    activeClassName: 'active',\n\t    className: 'App__homelink'\n\t  }),\n\t  _owner: null\n\t};\n\tvar _ref3 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Link,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Link.defaultProps, {\n\t    children: 'new',\n\t    to: '/newest',\n\t    activeClassName: 'active'\n\t  }),\n\t  _owner: null\n\t};\n\tvar _ref4 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Link,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Link.defaultProps, {\n\t    children: 'comments',\n\t    to: '/newcomments',\n\t    activeClassName: 'active'\n\t  }),\n\t  _owner: null\n\t};\n\tvar _ref5 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Link,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Link.defaultProps, {\n\t    children: 'show',\n\t    to: '/show',\n\t    activeClassName: 'active'\n\t  }),\n\t  _owner: null\n\t};\n\tvar _ref6 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Link,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Link.defaultProps, {\n\t    children: 'ask',\n\t    to: '/ask',\n\t    activeClassName: 'active'\n\t  }),\n\t  _owner: null\n\t};\n\tvar _ref7 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Link,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Link.defaultProps, {\n\t    children: 'jobs',\n\t    to: '/jobs',\n\t    activeClassName: 'active'\n\t  }),\n\t  _owner: null\n\t};\n\tvar _ref8 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Settings,\n\t  key: 'settings',\n\t  ref: null,\n\t  props: _defaultProps(Settings.defaultProps, {}),\n\t  _owner: null\n\t};\n\tvar _ref9 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'a',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'insin/react-hn',\n\t    href: 'https://github.com/insin/react-hn'\n\t  },\n\t  _owner: null\n\t};\n\tvar App = React.createClass({\n\t  displayName: 'App',\n\t\n\t  getInitialState: function getInitialState() {\n\t    return {\n\t      showSettings: false\n\t    };\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    SettingsStore.load();\n\t    StoryStore.loadSession();\n\t    UpdatesStore.loadSession();\n\t    window.addEventListener('beforeunload', this.handleBeforeUnload);\n\t  },\n\t\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    window.removeEventListener('beforeunload', this.handleBeforeUnload);\n\t  },\n\t\n\t  /**\n\t   * Give stores a chance to persist data to sessionStorage in case this is a\n\t   * refresh or an external link in the same tab.\n\t   */\n\t  handleBeforeUnload: function handleBeforeUnload() {\n\t    StoryStore.saveSession();\n\t    UpdatesStore.saveSession();\n\t  },\n\t\n\t  toggleSettings: function toggleSettings(e) {\n\t    e.preventDefault();\n\t    this.setState({ showSettings: !this.state.showSettings });\n\t  },\n\t\n\t  render: function render() {\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: [{\n\t              $$typeof: _typeofReactElement,\n\t              type: 'div',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: [_ref, ' ', _ref2, ' ', _ref3, ' | ', _ref4, ' ', ' | ', _ref5, ' | ', _ref6, ' | ', _ref7, {\n\t                  $$typeof: _typeofReactElement,\n\t                  type: 'a',\n\t                  key: null,\n\t                  ref: null,\n\t                  props: {\n\t                    children: this.state.showSettings ? 'hide settings' : 'settings',\n\t                    className: 'App__settings',\n\t                    tabIndex: '0',\n\t                    onClick: this.toggleSettings,\n\t                    onKeyPress: this.toggleSettings\n\t                  },\n\t                  _owner: null\n\t                }, this.state.showSettings && _ref8],\n\t                className: 'App__header'\n\t              },\n\t              _owner: null\n\t            }, {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'div',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: this.props.children,\n\t                className: 'App__content'\n\t              },\n\t              _owner: null\n\t            }, {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'div',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: ['react-hn v' + (\"1.3.1\") + ' | ', _ref9],\n\t                className: 'App__footer'\n\t              },\n\t              _owner: null\n\t            }],\n\t            className: 'App__wrap'\n\t          },\n\t          _owner: null\n\t        },\n\t        className: 'App',\n\t        onClick: this.state.showSettings && this.toggleSettings\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t});\n\t\n\tmodule.exports = App;\n\n/***/ },\n\n/***/ 144:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar SettingsStore = __webpack_require__(8);\n\t\n\tvar CommentMixin = __webpack_require__(57);\n\t\n\tvar cx = __webpack_require__(30);\n\t\n\t/**\n\t * Displays a standalone comment passed as a prop.\n\t */\n\tvar DisplayComment = React.createClass({\n\t  displayName: 'DisplayComment',\n\t\n\t  mixins: [CommentMixin],\n\t\n\t  propTypes: {\n\t    comment: React.PropTypes.object.isRequired\n\t  },\n\t\n\t  getInitialState: function getInitialState() {\n\t    return {\n\t      op: {},\n\t      parent: { type: 'comment' }\n\t    };\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    this.fetchAncestors(this.props.comment);\n\t  },\n\t\n\t  render: function render() {\n\t    if (this.props.comment.deleted) {\n\t      return null;\n\t    }\n\t    if (this.props.comment.dead && !SettingsStore.showDead) {\n\t      return null;\n\t    }\n\t\n\t    var comment = this.props.comment;\n\t    var className = cx('Comment Comment--level0', {\n\t      'Comment--dead': comment.dead\n\t    });\n\t\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: [this.renderCommentMeta(comment, {\n\t              link: true,\n\t              parent: !!this.state.parent.id && !!this.state.op.id && comment.parent !== this.state.op.id,\n\t              op: !!this.state.op.id\n\t            }), this.renderCommentText(comment, { replyLink: false })],\n\t            className: 'Comment__content'\n\t          },\n\t          _owner: null\n\t        },\n\t        className: className\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t});\n\t\n\tmodule.exports = DisplayComment;\n\n/***/ },\n\n/***/ 145:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar StoryCommentThreadStore = __webpack_require__(60);\n\t\n\tvar ItemMixin = __webpack_require__(58);\n\tvar ListItemMixin = __webpack_require__(89);\n\t\n\t/**\n\t * Display story title and metadata as a list item.\n\t * The story to display will be passed as a prop.\n\t */\n\tvar DisplayListItem = React.createClass({\n\t  displayName: 'DisplayListItem',\n\t\n\t  mixins: [ItemMixin, ListItemMixin],\n\t\n\t  propTypes: {\n\t    item: React.PropTypes.object.isRequired\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    this.threadState = StoryCommentThreadStore.loadState(this.props.item.id);\n\t  },\n\t\n\t  render: function render() {\n\t    return this.renderListItem(this.props.item, this.threadState);\n\t  }\n\t});\n\t\n\tmodule.exports = DisplayListItem;\n\n/***/ },\n\n/***/ 146:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\tvar ReactFireMixin = __webpack_require__(25);\n\tvar TimeAgo = __webpack_require__(34);\n\t\n\tvar HNService = __webpack_require__(12);\n\tvar StoryCommentThreadStore = __webpack_require__(60);\n\tvar ItemStore = __webpack_require__(91);\n\t\n\tvar Comment = __webpack_require__(87);\n\tvar PollOption = __webpack_require__(149);\n\tvar Spinner = __webpack_require__(19);\n\tvar ItemMixin = __webpack_require__(58);\n\t\n\tvar cx = __webpack_require__(30);\n\tvar setTitle = __webpack_require__(32);\n\t\n\tfunction timeUnitsAgo(value, unit, suffix) {\n\t  if (value === 1) {\n\t    return unit;\n\t  }\n\t  return value + ' ' + unit + 's';\n\t}\n\t\n\tvar _ref = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'div',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: {\n\t      $$typeof: _typeofReactElement,\n\t      type: Spinner,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Spinner.defaultProps, {\n\t        size: '20'\n\t      }),\n\t      _owner: null\n\t    },\n\t    className: 'Item Item--loading'\n\t  },\n\t  _owner: null\n\t};\n\tvar Item = React.createClass({\n\t  displayName: 'Item',\n\t\n\t  mixins: [ItemMixin, ReactFireMixin],\n\t\n\t  getInitialState: function getInitialState() {\n\t    return {\n\t      item: ItemStore.getCachedStory(Number(this.props.params.id)) || {}\n\t    };\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    this.bindAsObject(HNService.itemRef(this.props.params.id), 'item');\n\t    if (this.state.item.id) {\n\t      this.threadStore = new StoryCommentThreadStore(this.state.item, this.handleCommentsChanged, { cached: true });\n\t      setTitle(this.state.item.title);\n\t    }\n\t    window.addEventListener('beforeunload', this.handleBeforeUnload);\n\t  },\n\t\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    if (this.threadStore) {\n\t      this.threadStore.dispose();\n\t    }\n\t    window.removeEventListener('beforeunload', this.handleBeforeUnload);\n\t  },\n\t\n\t  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n\t    if (this.props.params.id !== nextProps.params.id) {\n\t      // Tear it down...\n\t      this.threadStore.dispose();\n\t      this.threadStore = null;\n\t      this.unbind('item');\n\t      // ...and set it up again\n\t      var item = ItemStore.getCachedStory(Number(nextProps.params.id));\n\t      if (item) {\n\t        this.threadStore = new StoryCommentThreadStore(item, this.handleCommentsChanged, { cached: true });\n\t        setTitle(item.title);\n\t      }\n\t      this.bindAsObject(HNService.itemRef(nextProps.params.id), 'item');\n\t      this.setState({ item: item || {} });\n\t    }\n\t  },\n\t\n\t  componentWillUpdate: function componentWillUpdate(nextProps, nextState) {\n\t    // Update the title when the item has loaded.\n\t    if (!this.state.item.id && nextState.item.id) {\n\t      setTitle(nextState.item.title);\n\t    }\n\t  },\n\t\n\t  componentDidUpdate: function componentDidUpdate(prevProps, prevState) {\n\t    // If the state item id changed, an initial or new item must have loaded\n\t    if (prevState.item.id !== this.state.item.id) {\n\t      if (!this.threadStore || this.threadStore.itemId !== this.state.item.id) {\n\t        this.threadStore = new StoryCommentThreadStore(this.state.item, this.handleCommentsChanged, { cached: false });\n\t        setTitle(this.state.item.title);\n\t        this.forceUpdate();\n\t      }\n\t    } else if (prevState.item !== this.state.item) {\n\t      // If the item has been updated from Firebase and the initial set\n\t      // of comments is still loading, the number of expected comments might\n\t      // need to be adjusted.\n\t      // This triggers a check for thread load completion, completing it\n\t      // immediately if a cached item had 0 kids and the latest version from\n\t      // Firebase also has 0 kids.\n\t      if (this.threadStore.loading) {\n\t        var kids = this.state.item.kids ? this.state.item.kids.length : 0;\n\t        var prevKids = prevState.item.kids ? prevState.item.kids.length : 0;\n\t        var kidDiff = kids - prevKids;\n\t        if (kidDiff !== 0) {\n\t          this.threadStore.adjustExpectedComments(kidDiff);\n\t        }\n\t      }\n\t      this.threadStore.itemUpdated(this.state.item);\n\t    }\n\t  },\n\t\n\t  /**\n\t   * Ensure the last visit time and comment details get stored for this item if\n\t   * the user refreshes or otherwise navigates off the page.\n\t   */\n\t  handleBeforeUnload: function handleBeforeUnload() {\n\t    if (this.threadStore) {\n\t      this.threadStore.dispose();\n\t    }\n\t  },\n\t\n\t  handleCommentsChanged: function handleCommentsChanged(payload) {\n\t    this.forceUpdate();\n\t  },\n\t\n\t  autoCollapse: function autoCollapse(e) {\n\t    e.preventDefault();\n\t    this.threadStore.collapseThreadsWithoutNewComments();\n\t  },\n\t\n\t  markAsRead: function markAsRead(e) {\n\t    e.preventDefault();\n\t    this.threadStore.markAsRead();\n\t    this.forceUpdate();\n\t  },\n\t\n\t  render: function render() {\n\t    var state = this.state;\n\t    var item = state.item;\n\t    var threadStore = this.threadStore;\n\t    if (!item.id || !threadStore) {\n\t      return _ref;\n\t    }\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [{\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: [this.renderItemTitle(item), this.renderItemMeta(item, threadStore.lastVisit !== null && threadStore.newCommentCount > 0 && {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'span',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: [' ', '(', {\n\t                  $$typeof: _typeofReactElement,\n\t                  type: 'em',\n\t                  key: null,\n\t                  ref: null,\n\t                  props: {\n\t                    children: [threadStore.newCommentCount, ' new']\n\t                  },\n\t                  _owner: null\n\t                }, ' in the last ', {\n\t                  $$typeof: _typeofReactElement,\n\t                  type: TimeAgo,\n\t                  key: null,\n\t                  ref: null,\n\t                  props: _defaultProps(TimeAgo.defaultProps, {\n\t                    date: threadStore.lastVisit,\n\t                    formatter: timeUnitsAgo\n\t                  }),\n\t                  _owner: null\n\t                }, ') | ', {\n\t                  $$typeof: _typeofReactElement,\n\t                  type: 'span',\n\t                  key: null,\n\t                  ref: null,\n\t                  props: {\n\t                    children: 'auto collapse',\n\t                    className: 'control',\n\t                    tabIndex: '0',\n\t                    onClick: this.autoCollapse,\n\t                    onKeyPress: this.autoCollapse,\n\t                    title: 'Collapse threads without new comments'\n\t                  },\n\t                  _owner: null\n\t                }, ' | ', {\n\t                  $$typeof: _typeofReactElement,\n\t                  type: 'span',\n\t                  key: null,\n\t                  ref: null,\n\t                  props: {\n\t                    children: 'mark as read',\n\t                    className: 'control',\n\t                    tabIndex: '0',\n\t                    onClick: this.markAsRead,\n\t                    onKeyPress: this.markAsRead\n\t                  },\n\t                  _owner: null\n\t                }]\n\t              },\n\t              _owner: null\n\t            }), item.text && {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'div',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: {\n\t                  $$typeof: _typeofReactElement,\n\t                  type: 'div',\n\t                  key: null,\n\t                  ref: null,\n\t                  props: {\n\t                    dangerouslySetInnerHTML: { __html: item.text }\n\t                  },\n\t                  _owner: null\n\t                },\n\t                className: 'Item__text'\n\t              },\n\t              _owner: null\n\t            }, item.type === 'poll' && {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'div',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: item.parts.map(function (id) {\n\t                  return {\n\t                    $$typeof: _typeofReactElement,\n\t                    type: PollOption,\n\t                    key: id,\n\t                    ref: null,\n\t                    props: _defaultProps(PollOption.defaultProps, {\n\t                      id: id\n\t                    }),\n\t                    _owner: null\n\t                  };\n\t                }),\n\t                className: 'Item__poll'\n\t              },\n\t              _owner: null\n\t            }],\n\t            className: 'Item__content'\n\t          },\n\t          _owner: null\n\t        }, item.kids && {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: item.kids.map(function (id, index) {\n\t              return {\n\t                $$typeof: _typeofReactElement,\n\t                type: Comment,\n\t                key: id,\n\t                ref: null,\n\t                props: _defaultProps(Comment.defaultProps, {\n\t                  id: id,\n\t                  level: 0,\n\t                  loadingSpinner: index === 0,\n\t                  threadStore: threadStore\n\t                }),\n\t                _owner: null\n\t              };\n\t            }),\n\t            className: 'Item__kids'\n\t          },\n\t          _owner: null\n\t        }],\n\t        className: cx('Item', { 'Item--dead': item.dead })\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t});\n\t\n\tmodule.exports = Item;\n\n/***/ },\n\n/***/ 147:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar _ref = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'h2',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'Not found'\n\t  },\n\t  _owner: null\n\t};\n\tvar NotFound = React.createClass({\n\t  displayName: 'NotFound',\n\t\n\t  render: function render() {\n\t    return _ref;\n\t  }\n\t});\n\t\n\tmodule.exports = NotFound;\n\n/***/ },\n\n/***/ 148:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\tvar ReactFireMixin = __webpack_require__(25);\n\t\n\tvar CommentThreadStore = __webpack_require__(59);\n\tvar HNService = __webpack_require__(12);\n\tvar SettingsStore = __webpack_require__(8);\n\tvar UpdatesStore = __webpack_require__(41);\n\t\n\tvar Comment = __webpack_require__(87);\n\tvar CommentMixin = __webpack_require__(57);\n\t\n\tvar cx = __webpack_require__(30);\n\tvar _setTitle = __webpack_require__(32);\n\t\n\tvar PermalinkedComment = React.createClass({\n\t  displayName: 'PermalinkedComment',\n\t\n\t  mixins: [CommentMixin, ReactFireMixin],\n\t\n\t  getDefaultProps: function getDefaultProps() {\n\t    return {\n\t      level: 0,\n\t      loadingSpinner: true\n\t    };\n\t  },\n\t\n\t  getInitialState: function getInitialState() {\n\t    return {\n\t      comment: UpdatesStore.getComment(this.props.params.id) || {},\n\t      parent: { type: 'comment' },\n\t      op: {}\n\t    };\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    this.bindAsObject(HNService.itemRef(this.props.params.id), 'comment');\n\t    if (this.state.comment.id) {\n\t      this.commentLoaded(this.state.comment);\n\t    }\n\t  },\n\t\n\t  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n\t    if (nextProps.params.id !== this.props.params.id) {\n\t      var comment = UpdatesStore.getComment(nextProps.params.id);\n\t      if (comment) {\n\t        this.commentLoaded(comment);\n\t        this.setState({ comment: comment });\n\t      }\n\t      this.unbind('comment');\n\t      this.bindAsObject(HNService.itemRef(nextProps.params.id), 'comment');\n\t    }\n\t  },\n\t\n\t  componentWillUpdate: function componentWillUpdate(nextProps, nextState) {\n\t    if (!nextState.comment) {\n\t      return;\n\t    }\n\t\n\t    if (this.state.comment.id !== nextState.comment.id) {\n\t      if (!nextState.comment.deleted) {\n\t        // Redirect to the appropriate route if a Comment \"parent\" link had a\n\t        // non-comment item id.\n\t        if (nextState.comment.type !== 'comment') {\n\t          this.context.router.replaceWith(nextState.comment.type, { id: nextState.comment.id });\n\t          return;\n\t        }\n\t      }\n\t      if (!this.threadStore || this.threadStore.itemId !== nextState.comment.id) {\n\t        this.commentLoaded(nextState.comment);\n\t      }\n\t    }\n\t  },\n\t\n\t  commentLoaded: function commentLoaded(comment) {\n\t    this.setTitle(comment);\n\t    if (!comment.deleted) {\n\t      this.threadStore = new CommentThreadStore(comment, this.handleCommentsChanged);\n\t      this.fetchAncestors(comment);\n\t    }\n\t  },\n\t\n\t  setTitle: function setTitle(comment) {\n\t    if (comment.deleted) {\n\t      return _setTitle('Deleted comment');\n\t    }\n\t    var title = 'Comment by ' + comment.by;\n\t    if (this.state.op.id) {\n\t      title += ' | ' + this.state.op.title;\n\t    }\n\t    _setTitle(title);\n\t  },\n\t\n\t  handleCommentsChanged: function handleCommentsChanged(payload) {\n\t    // We're only interested in re-rendering to update collapsed display\n\t    if (payload.type === 'collapse') {\n\t      this.forceUpdate();\n\t    }\n\t  },\n\t\n\t  render: function render() {\n\t    var comment = this.state.comment;\n\t    if (!comment) {\n\t      return this.renderError(comment, {\n\t        id: this.props.params.id,\n\t        className: 'Comment Comment--level0 Comment--error'\n\t      });\n\t    }\n\t    // Render a placeholder while we're waiting for the comment to load\n\t    if (!comment.id) {\n\t      return this.renderCommentLoading(comment);\n\t    }\n\t    // Render a link to HN for deleted comments\n\t    if (comment.deleted) {\n\t      return this.renderCommentDeleted(comment, {\n\t        className: 'Comment Comment--level0 Comment--deleted'\n\t      });\n\t    }\n\t    // XXX Don't render anything if we're replacing the route after loading a non-comment\n\t    if (comment.type !== 'comment') {\n\t      return null;\n\t    }\n\t\n\t    var className = cx('PermalinkedComment Comment Comment--level0', { 'Comment--dead': comment.dead });\n\t    var threadStore = this.threadStore;\n\t\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [{\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: [this.renderCommentMeta(comment, {\n\t              parent: !!this.state.parent.id && !!this.state.op.id && comment.parent !== this.state.op.id,\n\t              op: !!this.state.op.id\n\t            }), (!comment.dead || SettingsStore.showDead) && this.renderCommentText(comment, { replyLink: true })],\n\t            className: 'Comment__content'\n\t          },\n\t          _owner: null\n\t        }, comment.kids && {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: comment.kids.map(function (id, index) {\n\t              return {\n\t                $$typeof: _typeofReactElement,\n\t                type: Comment,\n\t                key: id,\n\t                ref: null,\n\t                props: _defaultProps(Comment.defaultProps, {\n\t                  id: id,\n\t                  level: 0,\n\t                  loadingSpinner: index === 0,\n\t                  threadStore: threadStore\n\t                }),\n\t                _owner: null\n\t              };\n\t            }),\n\t            className: 'Comment__kids'\n\t          },\n\t          _owner: null\n\t        }],\n\t        className: className\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t});\n\t\n\tmodule.exports = PermalinkedComment;\n\n/***/ },\n\n/***/ 149:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\tvar ReactFireMixin = __webpack_require__(25);\n\t\n\tvar HNService = __webpack_require__(12);\n\t\n\tvar Spinner = __webpack_require__(19);\n\t\n\tvar pluralise = __webpack_require__(43);\n\t\n\tvar _ref = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'div',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: {\n\t      $$typeof: _typeofReactElement,\n\t      type: Spinner,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Spinner.defaultProps, {\n\t        size: '20'\n\t      }),\n\t      _owner: null\n\t    },\n\t    className: 'PollOption PollOption--loading'\n\t  },\n\t  _owner: null\n\t};\n\tvar PollOption = React.createClass({\n\t  displayName: 'PollOption',\n\t\n\t  mixins: [ReactFireMixin],\n\t\n\t  getInitialState: function getInitialState() {\n\t    return { pollopt: {} };\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    this.bindAsObject(HNService.itemRef(this.props.id), 'pollopt');\n\t  },\n\t\n\t  render: function render() {\n\t    var pollopt = this.state.pollopt;\n\t    if (!pollopt.id) {\n\t      return _ref;\n\t    }\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [{\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: pollopt.text,\n\t            className: 'PollOption__text'\n\t          },\n\t          _owner: null\n\t        }, {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'div',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: [pollopt.score, ' point', pluralise(pollopt.score)],\n\t            className: 'PollOption__score'\n\t          },\n\t          _owner: null\n\t        }],\n\t        className: 'PollOption'\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t});\n\t\n\tmodule.exports = PollOption;\n\n/***/ },\n\n/***/ 150:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar SettingsStore = __webpack_require__(8);\n\t\n\tvar _ref = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'p',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'Automatically collapse comment threads without new comments on page load.'\n\t  },\n\t  _owner: null\n\t};\n\tvar _ref2 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'p',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'Show \"reply\" links to Hacker News'\n\t  },\n\t  _owner: null\n\t};\n\tvar _ref3 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'p',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'Show items flagged as dead.'\n\t  },\n\t  _owner: null\n\t};\n\tvar _ref4 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'p',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'Show comments flagged as deleted in threads.'\n\t  },\n\t  _owner: null\n\t};\n\tvar _ref5 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'td',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'label',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: 'title font size:',\n\t        htmlFor: 'titleFontSize'\n\t      },\n\t      _owner: null\n\t    }\n\t  },\n\t  _owner: null\n\t};\n\tvar _ref6 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'td',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'label',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: 'list spacing:',\n\t        htmlFor: 'listSpacing'\n\t      },\n\t      _owner: null\n\t    }\n\t  },\n\t  _owner: null\n\t};\n\tvar Settings = React.createClass({\n\t  displayName: 'Settings',\n\t\n\t  componentDidMount: function componentDidMount() {\n\t    this.refs.container.focus();\n\t  },\n\t\n\t  onChange: function onChange(e) {\n\t    var el = e.target;\n\t    if (el.type === 'checkbox') {\n\t      SettingsStore[el.name] = el.checked;\n\t    } else if (el.type === 'number' && el.value) {\n\t      SettingsStore[el.name] = el.value;\n\t    }\n\t    this.forceUpdate();\n\t    SettingsStore.save();\n\t  },\n\t\n\t  onClick: function onClick(e) {\n\t    e.stopPropagation();\n\t  },\n\t\n\t  render: function render() {\n\t    return React.createElement(\n\t      'div',\n\t      { ref: 'container', className: 'Settings', tabIndex: '-1', onClick: this.onClick },\n\t      {\n\t        $$typeof: _typeofReactElement,\n\t        type: 'form',\n\t        key: null,\n\t        ref: null,\n\t        props: {\n\t          children: [{\n\t            $$typeof: _typeofReactElement,\n\t            type: 'div',\n\t            key: null,\n\t            ref: null,\n\t            props: {\n\t              children: [{\n\t                $$typeof: _typeofReactElement,\n\t                type: 'label',\n\t                key: null,\n\t                ref: null,\n\t                props: {\n\t                  children: [{\n\t                    $$typeof: _typeofReactElement,\n\t                    type: 'input',\n\t                    key: null,\n\t                    ref: null,\n\t                    props: {\n\t                      type: 'checkbox',\n\t                      name: 'autoCollapse',\n\t                      id: 'autoCollapse',\n\t                      checked: SettingsStore.autoCollapse\n\t                    },\n\t                    _owner: null\n\t                  }, ' auto collapse'],\n\t                  htmlFor: 'autoCollapse'\n\t                },\n\t                _owner: null\n\t              }, _ref],\n\t              className: 'Settings__setting Settings__setting--checkbox'\n\t            },\n\t            _owner: null\n\t          }, {\n\t            $$typeof: _typeofReactElement,\n\t            type: 'div',\n\t            key: null,\n\t            ref: null,\n\t            props: {\n\t              children: [{\n\t                $$typeof: _typeofReactElement,\n\t                type: 'label',\n\t                key: null,\n\t                ref: null,\n\t                props: {\n\t                  children: [{\n\t                    $$typeof: _typeofReactElement,\n\t                    type: 'input',\n\t                    key: null,\n\t                    ref: null,\n\t                    props: {\n\t                      type: 'checkbox',\n\t                      name: 'replyLinks',\n\t                      id: 'replyLinks',\n\t                      checked: SettingsStore.replyLinks\n\t                    },\n\t                    _owner: null\n\t                  }, ' show reply links'],\n\t                  htmlFor: 'replyLinks'\n\t                },\n\t                _owner: null\n\t              }, _ref2],\n\t              className: 'Settings__setting Settings__setting--checkbox'\n\t            },\n\t            _owner: null\n\t          }, {\n\t            $$typeof: _typeofReactElement,\n\t            type: 'div',\n\t            key: null,\n\t            ref: null,\n\t            props: {\n\t              children: [{\n\t                $$typeof: _typeofReactElement,\n\t                type: 'label',\n\t                key: null,\n\t                ref: null,\n\t                props: {\n\t                  children: [{\n\t                    $$typeof: _typeofReactElement,\n\t                    type: 'input',\n\t                    key: null,\n\t                    ref: null,\n\t                    props: {\n\t                      type: 'checkbox',\n\t                      name: 'showDead',\n\t                      id: 'showDead',\n\t                      checked: SettingsStore.showDead\n\t                    },\n\t                    _owner: null\n\t                  }, ' show dead'],\n\t                  htmlFor: 'showDead'\n\t                },\n\t                _owner: null\n\t              }, _ref3],\n\t              className: 'Settings__setting Settings__setting--checkbox'\n\t            },\n\t            _owner: null\n\t          }, {\n\t            $$typeof: _typeofReactElement,\n\t            type: 'div',\n\t            key: null,\n\t            ref: null,\n\t            props: {\n\t              children: [{\n\t                $$typeof: _typeofReactElement,\n\t                type: 'label',\n\t                key: null,\n\t                ref: null,\n\t                props: {\n\t                  children: [{\n\t                    $$typeof: _typeofReactElement,\n\t                    type: 'input',\n\t                    key: null,\n\t                    ref: null,\n\t                    props: {\n\t                      type: 'checkbox',\n\t                      name: 'showDeleted',\n\t                      id: 'showDeleted',\n\t                      checked: SettingsStore.showDeleted\n\t                    },\n\t                    _owner: null\n\t                  }, ' show deleted'],\n\t                  htmlFor: 'showDeleted'\n\t                },\n\t                _owner: null\n\t              }, _ref4],\n\t              className: 'Settings__setting Settings__setting--checkbox'\n\t            },\n\t            _owner: null\n\t          }, {\n\t            $$typeof: _typeofReactElement,\n\t            type: 'div',\n\t            key: null,\n\t            ref: null,\n\t            props: {\n\t              children: {\n\t                $$typeof: _typeofReactElement,\n\t                type: 'table',\n\t                key: null,\n\t                ref: null,\n\t                props: {\n\t                  children: {\n\t                    $$typeof: _typeofReactElement,\n\t                    type: 'tbody',\n\t                    key: null,\n\t                    ref: null,\n\t                    props: {\n\t                      children: [{\n\t                        $$typeof: _typeofReactElement,\n\t                        type: 'tr',\n\t                        key: null,\n\t                        ref: null,\n\t                        props: {\n\t                          children: [_ref5, {\n\t                            $$typeof: _typeofReactElement,\n\t                            type: 'td',\n\t                            key: null,\n\t                            ref: null,\n\t                            props: {\n\t                              children: {\n\t                                $$typeof: _typeofReactElement,\n\t                                type: 'input',\n\t                                key: null,\n\t                                ref: null,\n\t                                props: {\n\t                                  type: 'number',\n\t                                  min: '13.333',\n\t                                  step: '1',\n\t                                  name: 'titleFontSize',\n\t                                  id: 'titleFontSize',\n\t                                  value: SettingsStore.titleFontSize\n\t                                },\n\t                                _owner: null\n\t                              }\n\t                            },\n\t                            _owner: null\n\t                          }]\n\t                        },\n\t                        _owner: null\n\t                      }, {\n\t                        $$typeof: _typeofReactElement,\n\t                        type: 'tr',\n\t                        key: null,\n\t                        ref: null,\n\t                        props: {\n\t                          children: [_ref6, {\n\t                            $$typeof: _typeofReactElement,\n\t                            type: 'td',\n\t                            key: null,\n\t                            ref: null,\n\t                            props: {\n\t                              children: {\n\t                                $$typeof: _typeofReactElement,\n\t                                type: 'input',\n\t                                key: null,\n\t                                ref: null,\n\t                                props: {\n\t                                  type: 'number',\n\t                                  min: '0',\n\t                                  name: 'listSpacing',\n\t                                  id: 'listSpacing',\n\t                                  value: SettingsStore.listSpacing\n\t                                },\n\t                                _owner: null\n\t                              }\n\t                            },\n\t                            _owner: null\n\t                          }]\n\t                        },\n\t                        _owner: null\n\t                      }]\n\t                    },\n\t                    _owner: null\n\t                  }\n\t                },\n\t                _owner: null\n\t              },\n\t              className: 'Settings__setting'\n\t            },\n\t            _owner: null\n\t          }],\n\t          onChange: this.onChange\n\t        },\n\t        _owner: null\n\t      }\n\t    );\n\t  }\n\t});\n\t\n\tmodule.exports = Settings;\n\n/***/ },\n\n/***/ 151:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar StoryStore = __webpack_require__(40);\n\t\n\tvar PageNumberMixin = __webpack_require__(90);\n\tvar Paginator = __webpack_require__(88);\n\tvar Spinner = __webpack_require__(19);\n\tvar StoryListItem = __webpack_require__(152);\n\tvar SettingsStore = __webpack_require__(8);\n\t\n\tvar _require = __webpack_require__(42);\n\t\n\tvar ITEMS_PER_PAGE = _require.ITEMS_PER_PAGE;\n\t\n\tvar pageCalc = __webpack_require__(92);\n\tvar setTitle = __webpack_require__(32);\n\t\n\tvar _ref = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Spinner,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Spinner.defaultProps, {}),\n\t  _owner: null\n\t};\n\tvar Stories = React.createClass({\n\t  displayName: 'Stories',\n\t\n\t  mixins: [PageNumberMixin],\n\t\n\t  propTypes: {\n\t    // The number of stories which may be paginated through\n\t    limit: React.PropTypes.number.isRequired,\n\t    // The route name being used\n\t    route: React.PropTypes.string.isRequired,\n\t    // The type of stories to be displayed\n\t    type: React.PropTypes.string.isRequired,\n\t\n\t    // Page title associated with the stories being displayed\n\t    title: React.PropTypes.string\n\t  },\n\t\n\t  getInitialState: function getInitialState() {\n\t    return {\n\t      ids: [],\n\t      limit: this.props.limit,\n\t      stories: []\n\t    };\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    setTitle(this.props.title);\n\t    this.store = new StoryStore(this.props.type);\n\t    this.store.addListener('update', this.handleUpdate);\n\t    this.store.start();\n\t    this.setState(this.store.getState());\n\t  },\n\t\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    this.store.removeListener('update', this.handleUpdate);\n\t    this.store.stop();\n\t    this.store = null;\n\t  },\n\t\n\t  handleUpdate: function handleUpdate(update) {\n\t    if (!this.isMounted()) {\n\t      if (false) {\n\t        console.warn('Skipping update as the ' + this.props.type + ' Stories component is no longer mounted.');\n\t      }\n\t      return;\n\t    }\n\t    update.limit = update.ids.length;\n\t    this.setState(update);\n\t  },\n\t\n\t  render: function render() {\n\t    var page = pageCalc(this.getPageNumber(), ITEMS_PER_PAGE, this.state.limit);\n\t\n\t    // Display a list of placeholder items while we're waiting for the initial\n\t    // list of story ids to load from Firebase.\n\t    if (this.state.stories.length === 0 && this.state.ids.length === 0) {\n\t      var dummyItems = [];\n\t      for (var i = page.startIndex; i < page.endIndex; i++) {\n\t        dummyItems.push({\n\t          $$typeof: _typeofReactElement,\n\t          type: 'li',\n\t          key: i,\n\t          ref: null,\n\t          props: {\n\t            children: _ref,\n\t            className: 'ListItem ListItem--loading',\n\t            style: { marginBottom: SettingsStore.listSpacing }\n\t          },\n\t          _owner: null\n\t        });\n\t      }\n\t      return {\n\t        $$typeof: _typeofReactElement,\n\t        type: 'div',\n\t        key: null,\n\t        ref: null,\n\t        props: {\n\t          children: [{\n\t            $$typeof: _typeofReactElement,\n\t            type: 'ol',\n\t            key: null,\n\t            ref: null,\n\t            props: {\n\t              children: dummyItems,\n\t              className: 'Items__list',\n\t              start: page.startIndex + 1\n\t            },\n\t            _owner: null\n\t          }, {\n\t            $$typeof: _typeofReactElement,\n\t            type: Paginator,\n\t            key: null,\n\t            ref: null,\n\t            props: _defaultProps(Paginator.defaultProps, {\n\t              route: this.props.route,\n\t              page: page.pageNum,\n\t              hasNext: page.hasNext\n\t            }),\n\t            _owner: null\n\t          }],\n\t          className: 'Items Items--loading'\n\t        },\n\t        _owner: null\n\t      };\n\t    }\n\t\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [{\n\t          $$typeof: _typeofReactElement,\n\t          type: 'ol',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: this.renderItems(page.startIndex, page.endIndex),\n\t            className: 'Items__list',\n\t            start: page.startIndex + 1\n\t          },\n\t          _owner: null\n\t        }, {\n\t          $$typeof: _typeofReactElement,\n\t          type: Paginator,\n\t          key: null,\n\t          ref: null,\n\t          props: _defaultProps(Paginator.defaultProps, {\n\t            route: this.props.route,\n\t            page: page.pageNum,\n\t            hasNext: page.hasNext\n\t          }),\n\t          _owner: null\n\t        }],\n\t        className: 'Items'\n\t      },\n\t      _owner: null\n\t    };\n\t  },\n\t\n\t  renderItems: function renderItems(startIndex, endIndex) {\n\t    var rendered = [];\n\t    for (var i = startIndex; i < endIndex; i++) {\n\t      var item = this.state.stories[i];\n\t      var id = this.state.ids[i];\n\t      if (id) {\n\t        rendered.push({\n\t          $$typeof: _typeofReactElement,\n\t          type: StoryListItem,\n\t          key: id,\n\t          ref: null,\n\t          props: _defaultProps(StoryListItem.defaultProps, {\n\t            id: id,\n\t            index: i,\n\t            cachedItem: item,\n\t            store: this.store\n\t          }),\n\t          _owner: null\n\t        });\n\t      } else {\n\t        rendered.push({\n\t          $$typeof: _typeofReactElement,\n\t          type: StoryListItem,\n\t          key: null,\n\t          ref: null,\n\t          props: _defaultProps(StoryListItem.defaultProps, {\n\t            cachedItem: item,\n\t            store: this.store\n\t          }),\n\t          _owner: null\n\t        });\n\t      }\n\t    }\n\t    return rendered;\n\t  }\n\t});\n\t\n\tmodule.exports = Stories;\n\n/***/ },\n\n/***/ 152:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\tvar ReactFireMixin = __webpack_require__(25);\n\t\n\tvar StoryCommentThreadStore = __webpack_require__(60);\n\tvar HNService = __webpack_require__(12);\n\tvar SettingsStore = __webpack_require__(8);\n\tvar StoryStore = __webpack_require__(40);\n\t\n\tvar ItemMixin = __webpack_require__(58);\n\tvar ListItemMixin = __webpack_require__(89);\n\tvar Spinner = __webpack_require__(19);\n\t\n\t/**\n\t * Display story title and metadata as as a list item.\n\t * Cached story data may be given as a prop, but this component is also\n\t * responsible for listening to updates to the story and providing the latest\n\t * version for StoryStore's cache.\n\t */\n\tvar _ref = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Spinner,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Spinner.defaultProps, {}),\n\t  _owner: null\n\t};\n\tvar StoryListItem = React.createClass({\n\t  displayName: 'StoryListItem',\n\t\n\t  mixins: [ItemMixin, ListItemMixin, ReactFireMixin],\n\t\n\t  propTypes: {\n\t    // The StoryStore handling caching and updates to the stories being displayed\n\t    store: React.PropTypes.instanceOf(StoryStore).isRequired,\n\t\n\t    // The story's id in Hacker News\n\t    id: React.PropTypes.number,\n\t    // A version of the story from the cache, for initial display\n\t    cachedItem: React.PropTypes.object,\n\t    // The current index of the story in the list being displayed\n\t    index: React.PropTypes.number\n\t  },\n\t\n\t  getDefaultProps: function getDefaultProps() {\n\t    return {\n\t      id: null,\n\t      cachedItem: null,\n\t      index: null\n\t    };\n\t  },\n\t\n\t  getInitialState: function getInitialState() {\n\t    return {\n\t      item: this.props.cachedItem || {}\n\t    };\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    if (this.props.id != null) {\n\t      this.initLiveItem(this.props);\n\t    } else if (this.props.cachedItem != null) {\n\t      // Display the comment state of the cached item we were given while we're\n\t      // waiting for the live item to load.\n\t      this.threadState = StoryCommentThreadStore.loadState(this.state.item.id);\n\t    }\n\t  },\n\t\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    if (this.props.id != null) {\n\t      this.props.store.removeListener(this.props.id, this.updateThreadState);\n\t    }\n\t  },\n\t\n\t  /**\n\t   * Catch the transition from not having an id prop to having one.\n\t   * Scenario: we were waiting for the initial list of story ids to load.\n\t   */\n\t  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n\t    if (this.props.id == null && nextProps.id != null) {\n\t      this.initLiveItem(nextProps);\n\t    }\n\t  },\n\t\n\t  /**\n\t   * If the live item has been loaded or updated, update the StoryStore cache\n\t   * with its current index and latest data.\n\t   */\n\t  componentWillUpdate: function componentWillUpdate(nextProps, nextState) {\n\t    if (this.state.item !== nextState.item) {\n\t      if (nextState.item != null) {\n\t        this.props.store.itemUpdated(nextState.item, this.props.index);\n\t      } else {\n\t        if (false) {\n\t          console.warn('Item ' + this.props.id + ' went from ' + JSON.stringify(this.state.item) + ' to ' + nextProps.item);\n\t        }\n\t      }\n\t    }\n\t  },\n\t\n\t  /**\n\t   * Initialise listening to updates for the item with the given id and\n\t   * initialise its comment thread state.\n\t   */\n\t  initLiveItem: function initLiveItem(props) {\n\t    // If we were given a cached item to display initially, it will be replaced\n\t    this.bindAsObject(HNService.itemRef(props.id), 'item');\n\t    this.threadState = StoryCommentThreadStore.loadState(props.id);\n\t    this.props.store.addListener(props.id, this.updateThreadState);\n\t  },\n\t\n\t  /**\n\t   * Update thread state in response to a storage event indicating it has been\n\t   * modified.\n\t   */\n\t  updateThreadState: function updateThreadState() {\n\t    this.threadState = StoryCommentThreadStore.loadState(this.props.id);\n\t    this.forceUpdate();\n\t  },\n\t\n\t  render: function render() {\n\t    // Display the loading spinner if we have nothing to show initially\n\t    if (!this.state.item || !this.state.item.id) {\n\t      return {\n\t        $$typeof: _typeofReactElement,\n\t        type: 'li',\n\t        key: null,\n\t        ref: null,\n\t        props: {\n\t          children: _ref,\n\t          className: 'ListItem ListItem--loading',\n\t          style: { marginBottom: SettingsStore.listSpacing }\n\t        },\n\t        _owner: null\n\t      };\n\t    }\n\t\n\t    return this.renderListItem(this.state.item, this.threadState);\n\t  }\n\t});\n\t\n\tmodule.exports = StoryListItem;\n\n/***/ },\n\n/***/ 153:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar SettingsStore = __webpack_require__(8);\n\tvar UpdatesStore = __webpack_require__(41);\n\t\n\tvar DisplayListItem = __webpack_require__(145);\n\tvar DisplayComment = __webpack_require__(144);\n\tvar Paginator = __webpack_require__(88);\n\tvar Spinner = __webpack_require__(19);\n\t\n\tvar PageNumberMixin = __webpack_require__(90);\n\t\n\tvar _require = __webpack_require__(42);\n\t\n\tvar ITEMS_PER_PAGE = _require.ITEMS_PER_PAGE;\n\t\n\tvar pageCalc = __webpack_require__(92);\n\tvar _setTitle = __webpack_require__(32);\n\t\n\tfunction filterDead(item) {\n\t  return !item.dead;\n\t}\n\t\n\tfunction filterUpdates(updates) {\n\t  if (!SettingsStore.showDead) {\n\t    return {\n\t      comments: updates.comments.filter(filterDead),\n\t      stories: updates.stories.filter(filterDead)\n\t    };\n\t  }\n\t  return updates;\n\t}\n\t\n\tvar _ref = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'div',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: {\n\t      $$typeof: _typeofReactElement,\n\t      type: Spinner,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Spinner.defaultProps, {\n\t        size: '20'\n\t      }),\n\t      _owner: null\n\t    },\n\t    className: 'Updates Updates--loading'\n\t  },\n\t  _owner: null\n\t};\n\tvar Updates = React.createClass({\n\t  displayName: 'Updates',\n\t\n\t  mixins: [PageNumberMixin],\n\t\n\t  getInitialState: function getInitialState() {\n\t    return filterUpdates(UpdatesStore.getUpdates());\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    this.setTitle(this.props.type);\n\t    UpdatesStore.start();\n\t    UpdatesStore.on('updates', this.handleUpdates);\n\t  },\n\t\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    UpdatesStore.off('updates', this.handleUpdates);\n\t    UpdatesStore.stop();\n\t  },\n\t\n\t  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n\t    if (this.props.type !== nextProps.type) {\n\t      this.setTitle(nextProps.type);\n\t    }\n\t  },\n\t\n\t  setTitle: function setTitle(type) {\n\t    _setTitle('New ' + (type === 'comments' ? 'Comments' : 'Links'));\n\t  },\n\t\n\t  handleUpdates: function handleUpdates(updates) {\n\t    if (!this.isMounted()) {\n\t      if (false) {\n\t        console.warn('Skipping update of ' + this.props.type + ' as the Updates component is not mounted');\n\t      }\n\t      return;\n\t    }\n\t    this.setState(filterUpdates(updates));\n\t  },\n\t\n\t  render: function render() {\n\t    var items = this.props.type === 'comments' ? this.state.comments : this.state.stories;\n\t    if (items.length === 0) {\n\t      return _ref;\n\t    }\n\t\n\t    var page = pageCalc(this.getPageNumber(), ITEMS_PER_PAGE, items.length);\n\t\n\t    if (this.props.type === 'comments') {\n\t      return {\n\t        $$typeof: _typeofReactElement,\n\t        type: 'div',\n\t        key: null,\n\t        ref: null,\n\t        props: {\n\t          children: [items.slice(page.startIndex, page.endIndex).map(function (comment) {\n\t            return {\n\t              $$typeof: _typeofReactElement,\n\t              type: DisplayComment,\n\t              key: comment.id,\n\t              ref: null,\n\t              props: _defaultProps(DisplayComment.defaultProps, {\n\t                id: comment.id,\n\t                comment: comment\n\t              }),\n\t              _owner: null\n\t            };\n\t          }), {\n\t            $$typeof: _typeofReactElement,\n\t            type: Paginator,\n\t            key: null,\n\t            ref: null,\n\t            props: _defaultProps(Paginator.defaultProps, {\n\t              route: 'newcomments',\n\t              page: page.pageNum,\n\t              hasNext: page.hasNext\n\t            }),\n\t            _owner: null\n\t          }],\n\t          className: 'Updates Comments'\n\t        },\n\t        _owner: null\n\t      };\n\t    } else {\n\t      return {\n\t        $$typeof: _typeofReactElement,\n\t        type: 'div',\n\t        key: null,\n\t        ref: null,\n\t        props: {\n\t          children: [{\n\t            $$typeof: _typeofReactElement,\n\t            type: 'ol',\n\t            key: null,\n\t            ref: null,\n\t            props: {\n\t              children: items.slice(page.startIndex, page.endIndex).map(function (item) {\n\t                return {\n\t                  $$typeof: _typeofReactElement,\n\t                  type: DisplayListItem,\n\t                  key: item.id,\n\t                  ref: null,\n\t                  props: _defaultProps(DisplayListItem.defaultProps, {\n\t                    item: item\n\t                  }),\n\t                  _owner: null\n\t                };\n\t              }),\n\t              className: 'Items__list',\n\t              start: page.startIndex + 1\n\t            },\n\t            _owner: null\n\t          }, {\n\t            $$typeof: _typeofReactElement,\n\t            type: Paginator,\n\t            key: null,\n\t            ref: null,\n\t            props: _defaultProps(Paginator.defaultProps, {\n\t              route: 'newest',\n\t              page: page.pageNum,\n\t              hasNext: page.hasNext\n\t            }),\n\t            _owner: null\n\t          }],\n\t          className: 'Updates Items'\n\t        },\n\t        _owner: null\n\t      };\n\t    }\n\t  }\n\t});\n\t\n\tmodule.exports = Updates;\n\n/***/ },\n\n/***/ 154:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\tvar ReactFireMixin = __webpack_require__(25);\n\tvar TimeAgo = __webpack_require__(34);\n\t\n\tvar HNService = __webpack_require__(12);\n\t\n\tvar Spinner = __webpack_require__(19);\n\t\n\tvar setTitle = __webpack_require__(32);\n\t\n\t// TODO User submissions\n\t\n\t// TODO User comments\n\t\n\tvar _ref = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Spinner,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Spinner.defaultProps, {\n\t    size: '20'\n\t  }),\n\t  _owner: null\n\t};\n\tvar _ref2 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'dt',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'Created'\n\t  },\n\t  _owner: null\n\t};\n\tvar _ref3 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'dt',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'Karma'\n\t  },\n\t  _owner: null\n\t};\n\tvar _ref4 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'dt',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'Delay'\n\t  },\n\t  _owner: null\n\t};\n\tvar _ref5 = {\n\t  $$typeof: _typeofReactElement,\n\t  type: 'dt',\n\t  key: null,\n\t  ref: null,\n\t  props: {\n\t    children: 'About'\n\t  },\n\t  _owner: null\n\t};\n\tvar UserProfile = React.createClass({\n\t  displayName: 'UserProfile',\n\t\n\t  mixins: [ReactFireMixin],\n\t  getInitialState: function getInitialState() {\n\t    return { user: {} };\n\t  },\n\t\n\t  componentWillMount: function componentWillMount() {\n\t    this.bindAsObject(HNService.userRef(this.props.params.id), 'user');\n\t  },\n\t\n\t  componentWillUpdate: function componentWillUpdate(nextProps, nextState) {\n\t    if (this.state.user.id !== nextState.user.id) {\n\t      setTitle('Profile: ' + nextState.user.id);\n\t    }\n\t  },\n\t\n\t  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n\t    if (this.props.params.id !== nextProps.params.id) {\n\t      this.unbind('user');\n\t      this.bindAsObject(HNService.userRef(nextProps.params.id), 'user');\n\t    }\n\t  },\n\t\n\t  render: function render() {\n\t    var user = this.state.user;\n\t    if (!user.id) {\n\t      return {\n\t        $$typeof: _typeofReactElement,\n\t        type: 'div',\n\t        key: null,\n\t        ref: null,\n\t        props: {\n\t          children: [{\n\t            $$typeof: _typeofReactElement,\n\t            type: 'h4',\n\t            key: null,\n\t            ref: null,\n\t            props: {\n\t              children: this.props.params.id\n\t            },\n\t            _owner: null\n\t          }, _ref],\n\t          className: 'UserProfile UserProfile--loading'\n\t        },\n\t        _owner: null\n\t      };\n\t    }\n\t    var createdDate = new Date(user.created * 1000);\n\t    return {\n\t      $$typeof: _typeofReactElement,\n\t      type: 'div',\n\t      key: null,\n\t      ref: null,\n\t      props: {\n\t        children: [{\n\t          $$typeof: _typeofReactElement,\n\t          type: 'h4',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: user.id\n\t          },\n\t          _owner: null\n\t        }, {\n\t          $$typeof: _typeofReactElement,\n\t          type: 'dl',\n\t          key: null,\n\t          ref: null,\n\t          props: {\n\t            children: [_ref2, {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'dd',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: [{\n\t                  $$typeof: _typeofReactElement,\n\t                  type: TimeAgo,\n\t                  key: null,\n\t                  ref: null,\n\t                  props: _defaultProps(TimeAgo.defaultProps, {\n\t                    date: createdDate\n\t                  }),\n\t                  _owner: null\n\t                }, ' (', createdDate.toDateString(), ')']\n\t              },\n\t              _owner: null\n\t            }, _ref3, {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'dd',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: user.karma\n\t              },\n\t              _owner: null\n\t            }, _ref4, {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'dd',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: user.delay\n\t              },\n\t              _owner: null\n\t            }, user.about && _ref5, user.about && {\n\t              $$typeof: _typeofReactElement,\n\t              type: 'dd',\n\t              key: null,\n\t              ref: null,\n\t              props: {\n\t                children: {\n\t                  $$typeof: _typeofReactElement,\n\t                  type: 'div',\n\t                  key: null,\n\t                  ref: null,\n\t                  props: {\n\t                    className: 'UserProfile__about',\n\t                    dangerouslySetInnerHTML: { __html: user.about }\n\t                  },\n\t                  _owner: null\n\t                }\n\t              },\n\t              _owner: null\n\t            }]\n\t          },\n\t          _owner: null\n\t        }],\n\t        className: 'UserProfile'\n\t      },\n\t      _owner: null\n\t    };\n\t  }\n\t});\n\t\n\tmodule.exports = UserProfile;\n\n/***/ },\n\n/***/ 155:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _typeofReactElement = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 60103;\n\t\n\tfunction _defaultProps(defaultProps, props) { if (defaultProps) { for (var propName in defaultProps) { if (typeof props[propName] === 'undefined') { props[propName] = defaultProps[propName]; } } } return props; }\n\t\n\tvar React = __webpack_require__(2);\n\t\n\tvar _require = __webpack_require__(15);\n\t\n\tvar IndexRoute = _require.IndexRoute;\n\tvar Route = _require.Route;\n\t\n\tvar App = __webpack_require__(143);\n\tvar Item = __webpack_require__(146);\n\tvar NotFound = __webpack_require__(147);\n\tvar PermalinkedComment = __webpack_require__(148);\n\tvar Stories = __webpack_require__(151);\n\tvar Updates = __webpack_require__(153);\n\tvar UserProfile = __webpack_require__(154);\n\t\n\tfunction stories(route, type, limit, title) {\n\t  return React.createClass({\n\t    render: function render() {\n\t      return React.createElement(Stories, _extends({}, this.props, { key: route, route: route, type: type, limit: limit, title: title }));\n\t    }\n\t  });\n\t}\n\t\n\tfunction updates(type) {\n\t  return React.createClass({\n\t    render: function render() {\n\t      return React.createElement(Updates, _extends({}, this.props, { key: type, type: type }));\n\t    }\n\t  });\n\t}\n\t\n\tvar Ask = stories('ask', 'askstories', 200, 'Ask');\n\tvar Comments = updates('comments');\n\tvar Jobs = stories('jobs', 'jobstories', 200, 'Jobs');\n\tvar New = stories('newest', 'newstories', 500, 'New Links');\n\tvar Show = stories('show', 'showstories', 200, 'Show');\n\tvar Top = stories('news', 'topstories', 500);\n\t\n\tmodule.exports = {\n\t  $$typeof: _typeofReactElement,\n\t  type: Route,\n\t  key: null,\n\t  ref: null,\n\t  props: _defaultProps(Route.defaultProps, {\n\t    children: [{\n\t      $$typeof: _typeofReactElement,\n\t      type: IndexRoute,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(IndexRoute.defaultProps, {\n\t        component: Top\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'news',\n\t        component: Top\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'newest',\n\t        component: New\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'show',\n\t        component: Show\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'ask',\n\t        component: Ask\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'jobs',\n\t        component: Jobs\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'item/:id',\n\t        component: Item\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'job/:id',\n\t        component: Item\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'poll/:id',\n\t        component: Item\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'story/:id',\n\t        component: Item\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'comment/:id',\n\t        component: PermalinkedComment\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'newcomments',\n\t        component: Comments\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: 'user/:id',\n\t        component: UserProfile\n\t      }),\n\t      _owner: null\n\t    }, {\n\t      $$typeof: _typeofReactElement,\n\t      type: Route,\n\t      key: null,\n\t      ref: null,\n\t      props: _defaultProps(Route.defaultProps, {\n\t        path: '*',\n\t        component: NotFound\n\t      }),\n\t      _owner: null\n\t    }],\n\t    path: '/',\n\t    component: App\n\t  }),\n\t  _owner: null\n\t};\n\n/***/ },\n\n/***/ 156:\n/***/ function(module, exports) {\n\n\t/**\n\t * Based on the implementation of _.debounce() from Underscore.js 1.7.0\n\t * http://underscorejs.org\n\t * (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t * Distributed under the MIT license.\n\t *\n\t * Returns a function, that, as long as it continues to be invoked, will not\n\t * be triggered. The function will be called after it stops being called for\n\t * N milliseconds. If `immediate` is passed, trigger the function on the\n\t * leading edge, instead of the trailing.\n\t *\n\t * The returned function has a .cancel() function which can be used to prevent\n\t * the debounced functiom being called.\n\t */\n\t\"use strict\";\n\t\n\tfunction cancellableDebounce(func, wait, immediate) {\n\t  var timeout, args, context, timestamp, result;\n\t\n\t  var later = function later() {\n\t    var last = Date.now() - timestamp;\n\t    if (last < wait && last > 0) {\n\t      timeout = setTimeout(later, wait - last);\n\t    } else {\n\t      timeout = null;\n\t      if (!immediate) {\n\t        result = func.apply(context, args);\n\t        if (!timeout) {\n\t          context = args = null;\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  var debounced = function debounced() {\n\t    context = this;\n\t    args = arguments;\n\t    timestamp = Date.now();\n\t    var callNow = immediate && !timeout;\n\t    if (!timeout) {\n\t      timeout = setTimeout(later, wait);\n\t    }\n\t    if (callNow) {\n\t      result = func.apply(context, args);\n\t      context = args = null;\n\t    }\n\t    return result;\n\t  };\n\t\n\t  debounced.cancel = function () {\n\t    if (timeout) {\n\t      clearTimeout(timeout);\n\t    }\n\t  };\n\t\n\t  return debounced;\n\t}\n\t\n\tmodule.exports = cancellableDebounce;\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** app.js\n **/","require('setimmediate')\n\nvar createHashHistory = require('history/lib/createHashHistory')\nvar React = require('react')\nvar {render} = require('react-dom')\nvar {Router} = require('react-router')\n\nvar routes = require('./routes')\n\n// Opt out of persistent state query key for for hash history\n// See https://github.com/rackt/history/blob/master/docs/HashHistoryCaveats.md\nvar history = createHashHistory({queryKey: false})\n\nrender(<Router history={history} routes={routes}/>, document.getElementById('app'))\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/index.js\n **/","var extend = require('../utils/extend')\nvar storage = require('../utils/storage')\n\nvar STORAGE_KEY = 'settings'\n\nvar SettingsStore = {\n  autoCollapse: true,\n  replyLinks: true,\n  showDead: false,\n  showDeleted: false,\n  titleFontSize: 18,\n  listSpacing: 16,\n\n  load() {\n    var json = storage.get(STORAGE_KEY)\n    if (json) {\n      extend(this, JSON.parse(json))\n    }\n  },\n\n  save() {\n    storage.set(STORAGE_KEY, JSON.stringify({\n      autoCollapse: this.autoCollapse,\n      replyLinks: this.replyLinks,\n      showDead: this.showDead,\n      showDeleted: this.showDeleted,\n      titleFontSize: this.titleFontSize,\n      listSpacing: this.listSpacing\n    }))\n  }\n}\n\nmodule.exports = SettingsStore\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/stores/SettingsStore.js\n **/","var Firebase = require('firebase')\n\nvar api = new Firebase('https://hacker-news.firebaseio.com/v0')\n\nfunction fetchItem(id, cb) {\n  itemRef(id).once('value', function(snapshot) {\n    cb(snapshot.val())\n  })\n}\n\nfunction fetchItems(ids, cb) {\n  var items = []\n  ids.forEach(function(id) {\n    fetchItem(id, addItem)\n  })\n  function addItem(item) {\n    items.push(item)\n    if (items.length >= ids.length) {\n      cb(items)\n    }\n  }\n}\n\nfunction storiesRef(path) {\n  return api.child(path)\n}\n\nfunction itemRef(id) {\n  return api.child('item/' + id)\n}\n\nfunction userRef(id) {\n  return api.child('user/' + id)\n}\n\nfunction updatesRef() {\n  return api.child('updates/items')\n}\n\nmodule.exports = {\n  fetchItem,\n  fetchItems,\n  storiesRef,\n  itemRef,\n  userRef,\n  updatesRef\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/services/HNService.js\n **/","var React = require('react')\n\n// TODO Implement GIF-based fallback for IE9 and another non-animating browsers\n//      See https://github.com/tobiasahlin/SpinKit for how-to\nvar Spinner = React.createClass({\n  getDefaultProps() {\n    return {size: 6, spacing: 2}\n  },\n\n  render() {\n    var bounceSize = this.props.size + 'px'\n    var bounceStyle = {height: bounceSize, width: bounceSize, marginRight: this.props.spacing + 'px'}\n    return <div className=\"Spinner\" style={{width: ((Number(this.props.size) + Number(this.props.spacing)) * 3) + 'px'}}>\n      <div className=\"bounce1\" style={bounceStyle}/>\n      <div className=\"bounce2\" style={bounceStyle}/>\n      <div className=\"bounce3\" style={bounceStyle}/>\n    </div>\n  }\n})\n\nmodule.exports = Spinner\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/Spinner.js\n **/","/**\n * Creates a className string including some class names conditionally.\n * @param {string=} staticClassName class name(s) which should always be\n *   included.\n * @param {Object.<string, *>} conditionalClassNames an object mapping class\n *   names to a value which indicates if the class name should be included -\n *   class names will be included if their corresponding value is truthy.\n * @return {string}\n */\nfunction buildClassName(staticClassName, conditionalClassNames) {\n  var classNames = []\n  if (typeof conditionalClassNames == 'undefined') {\n    conditionalClassNames = staticClassName\n  }\n  else {\n    classNames.push(staticClassName)\n  }\n  var classNameKeys = Object.keys(conditionalClassNames)\n  for (var i = 0, l = classNameKeys.length; i < l; i++) {\n    if (conditionalClassNames[classNameKeys[i]]) {\n      classNames.push(classNameKeys[i])\n    }\n  }\n  return classNames.join(' ')\n}\n\nmodule.exports = buildClassName\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/utils/buildClassName.js\n **/","function extend(dest, src1, src2) {\n  var props = Object.keys(src1)\n  for (var i = 0, l = props.length; i < l; i++) {\n    dest[props[i]] = src1[props[i]]\n  }\n  if (src2) {\n    props = Object.keys(src2)\n    for (i = 0, l = props.length; i < l; i++) {\n      dest[props[i]] = src2[props[i]]\n    }\n  }\n  return dest\n}\n\nmodule.exports = extend\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/utils/extend.js\n **/","var {SITE_TITLE} = require('./constants')\n\nfunction setTitle(title) {\n  document.title = (title ? title + ' | ' + SITE_TITLE : SITE_TITLE)\n}\n\nmodule.exports = setTitle\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/utils/setTitle.js\n **/","var {EventEmitter} = require('events')\n\nvar HNService = require('../services/HNService')\n\nvar extend = require('../utils/extend')\n\n/**\n * Firebase reference used to stream updates - only one StoryStore instance can\n * be active at a time.\n */\nvar firebaseRef = null\n\n// Cache objects shared among StoryStore instances, also accessible via static\n// functions on the StoryStore constructor.\n\n/**\n * Story ids by type, in rank order. Persisted to sessionStorage.\n * @type Object.<type, Array.<id>>\n */\nvar idCache = {}\n\n/**\n * Item cache. Persisted to sessionStorage.\n * @type Object.<id, item>\n */\nvar itemCache = {}\n\n/**\n * Story items in rank order for display, by type.\n * @type Object.<type, Array.<item>>\n */\nvar storyLists = {}\n\n/**\n * Populate the story list for the given story type from the cache.\n */\nfunction populateStoryList(type) {\n  var ids = idCache[type]\n  var storyList = storyLists[type]\n  for (var i = 0, l = ids.length; i < l; i++) {\n    storyList[i] = itemCache[ids[i]] || null\n  }\n}\n\nfunction parseJSON(json, defaultValue) {\n  return (json ? JSON.parse(json) : defaultValue)\n}\n\nclass StoryStore extends EventEmitter {\n  constructor(type) {\n    super()\n    this.type = type\n\n    // Ensure cache objects for this type are initialised\n    if (!(type in idCache)) {\n      idCache[type] = []\n    }\n    if (!(type in storyLists)) {\n      storyLists[type] = []\n      populateStoryList(type)\n    }\n\n    // Pre-bind event handlers per instance\n    this.onStorage = this.onStorage.bind(this)\n    this.onStoriesUpdated = this.onStoriesUpdated.bind(this)\n  }\n\n  getState() {\n    return {\n      ids: idCache[this.type],\n      stories: storyLists[this.type]\n    }\n  }\n\n  itemUpdated(item, index) {\n    storyLists[this.type][index] = item\n    itemCache[item.id] = item\n  }\n\n  /**\n   * Emit an item id event if a storage key corresponding to an item in the\n   * cache has changed.\n   */\n  onStorage(e) {\n    if (itemCache[e.key]) {\n      this.emit(e.key)\n    }\n  }\n\n  /**\n   * Handle story id snapshots from Firebase.\n   */\n  onStoriesUpdated(snapshot) {\n    idCache[this.type] = snapshot.val()\n    populateStoryList(this.type)\n    this.emit('update', this.getState())\n  }\n\n  start() {\n    firebaseRef = HNService.storiesRef(this.type)\n    firebaseRef.on('value', this.onStoriesUpdated)\n    window.addEventListener('storage', this.onStorage)\n  }\n\n  stop() {\n    if (firebaseRef !== null) {\n      firebaseRef.off()\n      firebaseRef = null\n    }\n    window.removeEventListener('storage', this.onStorage)\n  }\n}\n\n// Static, cache-related functions\nextend(StoryStore, {\n  /**\n   * Get an item from the cache.\n   */\n  getItem(id) {\n    return itemCache[id] || null\n  },\n\n  /**\n   * Deserialise caches from sessionStorage.\n   */\n  loadSession() {\n    idCache = parseJSON(window.sessionStorage.idCache, {})\n    itemCache = parseJSON(window.sessionStorage.itemCache, {})\n  },\n\n  /**\n   * Serialise caches to sessionStorage as JSON.\n   */\n  saveSession() {\n    window.sessionStorage.idCache = JSON.stringify(idCache)\n    window.sessionStorage.itemCache = JSON.stringify(itemCache)\n  }\n})\n\nmodule.exports = StoryStore\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/stores/StoryStore.js\n **/","var EventEmitter = require('events').EventEmitter\n\nvar HNService = require('../services/HNService')\n\nvar {UPDATES_CACHE_SIZE} = require('../utils/constants')\nvar extend = require('../utils/extend')\n\n/**\n * Firebase reference used to stream updates.\n */\nvar updatesRef = null\n\n/**\n * Contains item id -> item cache objects. Persisted to sessionStorage.\n * @prop .comments {Object.<id,item>} comments cache.\n * @prop .stories {Object.<id,item>} story cache.\n */\nvar updatesCache = null\n\n/**\n * Lists of items in reverse chronological order for display.\n * @prop .comments {Array.<item>} comment updates.\n * @prop .stories {Array.<item>} story updates.\n */\nvar updates = {}\n\nfunction sortByTimeDesc(a, b) {\n  return b.time - a.time\n}\n\nfunction cacheObjToSortedArray(obj) {\n  var arr = Object.keys(obj).map(function(id) { return obj[id] })\n  arr.sort(sortByTimeDesc)\n  return arr\n}\n\n/**\n * Populate lists of updates for display from the cache.\n */\nfunction populateUpdates() {\n  updates.comments = processCacheObj(updatesCache.comments)\n  updates.stories = processCacheObj(updatesCache.stories)\n}\n\n/**\n * Create an array of items from a cache object, sorted in reverse chronological\n * order. Evict the oldest items from the cache if it's grown above\n * UPDATES_CACHE_SIZE.\n */\nfunction processCacheObj(cacheObj) {\n  var arr = cacheObjToSortedArray(cacheObj)\n  arr.splice(UPDATES_CACHE_SIZE, Math.max(0, arr.length - UPDATES_CACHE_SIZE))\n     .forEach(function(item) {\n       delete cacheObj[item.id]\n     })\n  return arr\n}\n\n/**\n * Lookup to filter out any items which appear in the updates feed which can't\n * be displayed by the Updates component.\n */\nvar updateItemTypes = {\n  comment: true,\n  job: true,\n  poll: true,\n  story: true\n}\n\n/**\n * Process incoming items from the update stream.\n */\nfunction handleUpdateItems(items) {\n  for (var i = 0, l = items.length; i < l; i++) {\n    var item = items[i]\n    // Silently ignore deleted items (because irony)\n    if (item.deleted) { continue }\n\n    if (typeof updateItemTypes[item.type] == 'undefined') {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\n          \"An item which can't be displayed by the Updates component was \" +\n          'received in the updates stream: ' + JSON.stringify(item)\n        )\n      }\n      continue\n    }\n\n    if (item.type === 'comment') {\n      updatesCache.comments[item.id] = item\n    }\n    else {\n      updatesCache.stories[item.id] = item\n    }\n  }\n\n  populateUpdates()\n  UpdatesStore.emit('updates', updates)\n}\n\nvar UpdatesStore = extend(new EventEmitter(), {\n  loadSession() {\n    var json = window.sessionStorage.updates\n    updatesCache = (json ? JSON.parse(json) : {comments: {}, stories: {}})\n    populateUpdates()\n  },\n\n  saveSession() {\n    window.sessionStorage.updates = JSON.stringify(updatesCache)\n  },\n\n  start() {\n    if (updatesRef === null) {\n      updatesRef = HNService.updatesRef()\n      updatesRef.on('value', function(snapshot) {\n        HNService.fetchItems(snapshot.val(), handleUpdateItems)\n      })\n    }\n  },\n\n  stop() {\n    updatesRef.off()\n    updatesRef = null\n  },\n\n  getUpdates() {\n    return updates\n  },\n\n  getItem(id) {\n    return (updatesCache.comments[id] || updatesCache.stories[id] || null)\n  },\n\n  getComment(id) {\n    return (updatesCache.comments[id] || null)\n  },\n\n  getStory(id) {\n    return (updatesCache.stories[id] || null)\n  }\n})\nUpdatesStore.off = UpdatesStore.removeListener\n\nmodule.exports = UpdatesStore\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/stores/UpdatesStore.js\n **/","module.exports = {\n  ITEMS_PER_PAGE: 30,\n  SITE_TITLE: 'React HN',\n  UPDATES_CACHE_SIZE: 500\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/utils/constants.js\n **/","function pluralise(howMany, suffixes) {\n  return (suffixes || ',s').split(',')[(howMany === 1 ? 0 : 1)]\n}\n\nmodule.exports = pluralise\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/utils/pluralise.js\n **/","var React = require('react')\nvar {Link} = require('react-router')\nvar TimeAgo = require('react-timeago')\n\nvar ItemStore = require('../stores/ItemStore')\nvar SettingsStore = require('../stores/SettingsStore')\n\nvar Spinner = require('../Spinner')\n\nvar pluralise = require('../utils/pluralise')\n\nvar CommentMixin = {\n  fetchAncestors(comment) {\n    ItemStore.fetchCommentAncestors(comment, result => {\n      if (process.env.NODE_ENV !== 'production') {\n        console.info(\n          'fetchAncestors(' + comment.id + ') took ' +\n          result.timeTaken + ' ms for ' +\n          result.itemCount + ' item' + pluralise(result.itemCount) + ' with ' +\n          result.cacheHits + ' cache hit' + pluralise(result.cacheHits) + ' (' +\n          (result.cacheHits / result.itemCount * 100).toFixed(1) + '%)'\n        )\n      }\n      if (!this.isMounted()) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.info(\"...but the comment isn't mounted\")\n        }\n        // Too late - the comment or the user has moved elsewhere\n        return\n      }\n      this.setState({\n        parent: result.parent,\n        op: result.op\n      })\n    })\n  },\n\n  renderCommentLoading(comment) {\n    return <div className={'Comment Comment--loading Comment--level' + this.props.level}>\n      {(this.props.loadingSpinner || comment.delayed) && <Spinner size=\"20\"/>}\n      {comment.delayed && <div className=\"Comment__text\">\n        Unable to load comment &ndash; this usually indicates the author has configured a delay.\n        Trying again in 30 seconds.\n      </div>}\n    </div>\n  },\n\n  renderCommentDeleted(comment, options) {\n    return <div className={options.className}>\n      <div className=\"Comment__content\">\n        <div className=\"Comment__meta\">\n          [deleted] | <a href={'https://news.ycombinator.com/item?id=' + comment.id}>view on Hacker News</a>\n        </div>\n      </div>\n    </div>\n  },\n\n  renderError(comment, options) {\n    return <div className={options.className}>\n      <div className=\"Comment__content\">\n        <div className=\"Comment__meta\">\n          [error] | comment is {JSON.stringify(comment)} | <a href={'https://news.ycombinator.com/item?id=' + options.id}>view on Hacker News</a>\n        </div>\n      </div>\n    </div>\n  },\n\n  renderCollapseControl(collapsed) {\n    return <span className=\"Comment__collapse\" onClick={this.toggleCollapse} onKeyPress={this.toggleCollapse} tabIndex=\"0\">\n      [{collapsed ? '+' : ''}]\n    </span>\n  },\n\n  /**\n   * @param options.collapsible {Boolean} if true, assumes this.toggleCollspse()\n   * @param options.collapsed {Boolean}\n   * @param options.link {Boolean}\n   * @param options.parent {Boolean} if true, assumes this.state.parent\n   * @param options.op {Boolean} if true, assumes this.state.op\n   * @param options.childCounts {Object} with .children and .newComments\n   */\n  renderCommentMeta(comment, options) {\n    if (comment.dead && !SettingsStore.showDead) {\n      return <div className=\"Comment__meta\">\n        {options.collapsible && this.renderCollapseControl(options.collapsed)}\n        {options.collapsible && ' '}\n        [dead]\n        {options.childCounts && ' | (' + options.childCounts.children + ' child' + pluralise(options.childCounts.children, ',ren')}\n          {options.childCounts && options.childCounts.newComments > 0 && ', '}\n          {options.childCounts && options.childCounts.newComments > 0 && <em>{options.childCounts.newComments} new</em>}\n        {options.childCounts && ')'}\n      </div>\n    }\n\n    return <div className=\"Comment__meta\">\n      {options.collapsible && this.renderCollapseControl(options.collapsed)}\n      {options.collapsible && ' '}\n      <Link to={`/user/${comment.by}`} className=\"Comment__user\">{comment.by}</Link>{' '}\n      <TimeAgo date={comment.time * 1000}/>\n      {options.link && ' | '}\n      {options.link && <Link to={`/comment/${comment.id}`}>link</Link>}\n      {options.parent && ' | '}\n      {options.parent && <Link to={`/${this.state.parent.type}/${comment.parent}`}>parent</Link>}\n      {options.op && ' | on: '}\n      {options.op && <Link to={`/${this.state.op.type}/${this.state.op.id}`}>{this.state.op.title}</Link>}\n      {comment.dead && ' | [dead]'}\n      {options.childCounts && ' | (' + options.childCounts.children + ' child' + pluralise(options.childCounts.children, ',ren')}\n        {options.childCounts && options.childCounts.newComments > 0 && ', '}\n        {options.childCounts && options.childCounts.newComments > 0 && <em>{options.childCounts.newComments} new</em>}\n      {options.childCounts && ')'}\n    </div>\n  },\n\n  renderCommentText(comment, options) {\n    return <div className=\"Comment__text\">\n      {(!comment.dead || SettingsStore.showDead) ? <div dangerouslySetInnerHTML={{__html: comment.text}}/> : '[dead]'}\n      {SettingsStore.replyLinks && options.replyLink && !comment.dead && <p>\n        <a href={`https://news.ycombinator.com/reply?id=${comment.id}`}>reply</a>\n      </p>}\n    </div>\n  }\n}\n\nmodule.exports = CommentMixin\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/mixins/CommentMixin.js\n **/","var React = require('react')\nvar {Link} = require('react-router')\nvar TimeAgo = require('react-timeago')\n\nvar SettingsStore = require('../stores/SettingsStore')\nvar pluralise = require('../utils/pluralise')\n\nvar parseHost = (function() {\n  var a = document.createElement('a')\n  return function(url) {\n    a.href = url\n    var parts = a.hostname.split('.').slice(-3)\n    if (parts[0] === 'www') {\n      parts.shift()\n    }\n    return parts.join('.')\n  }\n})()\n\n/**\n * Reusable logic for displaying an item.\n */\nvar ItemMixin = {\n  /**\n   * Render an item's metadata bar.\n   */\n  renderItemMeta(item, extraContent) {\n    var itemDate = new Date(item.time * 1000)\n\n    if (item.type === 'job') {\n      return <div className=\"Item__meta\">\n        <TimeAgo date={itemDate} className=\"Item__time\"/>\n      </div>\n    }\n\n    return <div className=\"Item__meta\">\n      <span className=\"Item__score\">\n        {item.score} point{pluralise(item.score)}\n      </span>{' '}\n      <span className=\"Item__by\">\n        by <Link to={`/user/${item.by}`}>{item.by}</Link>\n      </span>{' '}\n      <TimeAgo date={itemDate} className=\"Item__time\"/>\n      {' | '}\n      <Link to={`/${item.type}/${item.id}`}>\n        {item.descendants > 0 ? item.descendants + ' comment' + pluralise(item.descendants) : 'discuss'}\n      </Link>\n      {extraContent}\n    </div>\n  },\n\n  /**\n   * Render an item's title bar.\n   */\n  renderItemTitle(item) {\n    var hasURL = !!item.url\n    var title\n    if (item.dead) {\n      title = '[dead] ' + item.title\n    }\n    else {\n      title = (hasURL ? <a href={item.url}>{item.title}</a>\n                      : <Link to={`/${item.type}/${item.id}`}>{item.title}</Link>)\n    }\n    return <div className=\"Item__title\" style={{fontSize: SettingsStore.titleFontSize}}>\n      {title}\n      {hasURL && ' '}\n      {hasURL && <span className=\"Item__host\">({parseHost(item.url)})</span>}\n    </div>\n  }\n}\n\nmodule.exports = ItemMixin\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/mixins/ItemMixin.js\n **/","var extend = require('../utils/extend')\n\nfunction CommentThreadStore(item, onCommentsChanged) {\n  this.itemId = item.id\n  this.onCommentsChanged = onCommentsChanged\n\n  /**\n   * Lookup from a comment id to its child comment ids.\n   * @type {Object.<id,Array.<Number>>}\n   */\n  this.children = {}\n  this.children[item.id] = []\n\n  /**\n   * Lookup for new comment ids. Will only contain true.\n   * @type {Object.<id,Boolean>}\n   */\n  this.isNew = {}\n\n  /**\n   * Lookup for collapsed state of comment ids. May contain true or false.\n   * @type {Object.<id,Boolean>}\n   */\n  this.isCollapsed = {}\n}\n\nextend(CommentThreadStore.prototype, {\n  /**\n   * Get counts of children and new comments under the given comment.\n   * @return .children {Number}\n   * @return .newComments {Number}\n   */\n  getChildCounts(comment) {\n    var childCount = 0\n    var newCommentCount = 0\n    var nodes = [comment.id]\n\n    while (nodes.length) {\n      var nextNodes = []\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        var nodeChildren = this.children[nodes[i]]\n        if (nodeChildren.length) {\n          nextNodes.push.apply(nextNodes, nodeChildren)\n        }\n      }\n      for (i = 0, l = nextNodes.length; i < l; i++) {\n        if (this.isNew[nextNodes[i]]) {\n          newCommentCount++\n        }\n      }\n      childCount += nextNodes.length\n      nodes = nextNodes\n    }\n\n    return {\n      children: childCount,\n      newComments: newCommentCount\n    }\n  },\n\n  /**\n   * Register a comment's appearance in the thread.\n   */\n  commentAdded(comment) {\n    if (comment.deleted) { return }\n\n    this.children[comment.id] = []\n    this.children[comment.parent].push(comment.id)\n  },\n\n  /**\n   * Register a comment's deletion from the thread.\n   */\n  commentDeleted(comment) {\n    // Comments which initially failed to load (null from Firebase API) can be\n    // deleted by the time the API catches up.\n    if (!comment) { return }\n\n    var siblings = this.children[comment.parent]\n    siblings.splice(siblings.indexOf(comment.id), 1)\n  },\n\n  toggleCollapse(commentId) {\n    this.isCollapsed[commentId] = !this.isCollapsed[commentId]\n    this.onCommentsChanged({type: 'collapse'})\n  }\n})\n\nmodule.exports = CommentThreadStore\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/stores/CommentThreadStore.js\n **/","var CommentThreadStore = require('./CommentThreadStore')\nvar SettingsStore = require('./SettingsStore')\n\nvar debounce = require('../utils/cancellableDebounce')\nvar extend = require('../utils/extend')\nvar pluralise = require('../utils/pluralise')\nvar storage = require('../utils/storage')\n\n/**\n * Load persisted comment thread state.\n * @return .lastVisit {Date} null if the item hasn't been visited before.\n * @return .commentCount {Number} 0 if the item hasn't been visited before.\n * @return .maxCommentId {Number} 0 if the item hasn't been visited before.\n */\nfunction loadState(itemId) {\n  var json = storage.get(itemId)\n  if (json) {\n    return JSON.parse(json)\n  }\n  return {\n    lastVisit: null,\n    commentCount: 0,\n    maxCommentId: 0\n  }\n}\n\nfunction StoryCommentThreadStore(item, onCommentsChanged, options) {\n  CommentThreadStore.call(this, item, onCommentsChanged)\n  this.startedLoading = Date.now()\n\n  /** Lookup from a comment id to its parent comment id. */\n  this.parents = {}\n  /** The number of comments which have loaded. */\n  this.commentCount = 0\n  /** The number of new comments which have loaded. */\n  this.newCommentCount = 0\n  /** The max comment id seen by the store. */\n  this.maxCommentId = 0\n  /** Has the comment thread finished loading? */\n  this.loading = true\n  /** The number of comments we're expecting to load. */\n  this.expectedComments = item.kids ? item.kids.length : 0\n  /**\n   * The number of descendants the story has according to the API.\n   * This count includes deleted comments, which aren't accessible via the API,\n   * so a thread with deleted comments (example story id: 9273709) will never\n   * load this number of comments\n   * However, we still need to persist the last known descendant count in order\n   * to determine how many new comments there are when displaying the story on a\n   * list page.\n   */\n  this.itemDescendantCount = item.descendants\n\n  var initialState = loadState(item.id)\n  /** Time of last visit to the story. */\n  this.lastVisit = initialState.lastVisit\n  /** Max comment id on the last visit - determines which comments are new. */\n  this.prevMaxCommentId = initialState.maxCommentId\n  /** Is this the user's first time viewing the story? */\n  this.isFirstVisit = (initialState.lastVisit === null)\n\n  // Trigger an immediate check for thread load completion if the item was not\n  // retrieved from the cache, so is the latest version. This completes page\n  // loading immediately for items which have no comments yet.\n  if (!options.cached) {\n    this.checkLoadCompletion()\n  }\n}\n\nStoryCommentThreadStore.loadState = loadState\n\nStoryCommentThreadStore.prototype = extend(Object.create(CommentThreadStore.prototype), {\n  constructor: StoryCommentThreadStore,\n\n  /**\n   * Callback to the item component with updated comment counts, debounced as\n   * comments will be loading frequently on initial load.\n   */\n  numberOfCommentsChanged: debounce(function() {\n    this.onCommentsChanged({type: 'number'})\n  }, 123),\n\n  /**\n   * If we don't have a last visit time stored for an item, it must have been\n   * visited for the first time. Once it finishes loading, establish the last\n   * visit time and max comment id which will be used to track and display new\n   * comments.\n   */\n  firstLoadComplete() {\n    this.lastVisit = Date.now()\n    this.prevMaxCommentId = this.maxCommentId\n    this.isFirstVisit = false\n    this.onCommentsChanged({type: 'first_load_complete'})\n  },\n\n  /**\n   * Check whether the number of comments has reached the expected number yet.\n   */\n  checkLoadCompletion() {\n    if (this.loading && this.commentCount >= this.expectedComments) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.info(\n          'Initial load of ' +\n           this.commentCount + ' comment' + pluralise(this.commentCount) +\n          ' for ' + this.itemId + ' took ' +\n          ((Date.now() - this.startedLoading) / 1000).toFixed(2) + 's'\n        )\n      }\n      this.loading = false\n      if (this.isFirstVisit) {\n        this.firstLoadComplete()\n      }\n      else if (SettingsStore.autoCollapse && this.newCommentCount > 0) {\n        this.collapseThreadsWithoutNewComments()\n      }\n      this._storeState()\n    }\n  },\n\n  /**\n   * Persist comment thread state.\n   */\n  _storeState() {\n    storage.set(this.itemId, JSON.stringify({\n      lastVisit: Date.now(),\n      commentCount: this.itemDescendantCount,\n      maxCommentId: this.maxCommentId\n    }))\n  },\n\n  /**\n   * The item this comment thread belongs to got updated.\n   */\n  itemUpdated(item) {\n    this.itemDescendantCount = item.descendants\n  },\n\n  /**\n   * A comment got loaded initially or added later.\n   */\n  commentAdded(comment) {\n    // Deleted comments don't count towards the comment count\n    if (comment.deleted) {\n      // Adjust the number of comments expected during the initial page load.\n      if (this.loading) {\n        this.expectedComments--\n        this.checkLoadCompletion()\n      }\n      return\n    }\n\n    CommentThreadStore.prototype.commentAdded.call(this, comment)\n\n    // Dead comments don't contribute to the comment count if showDead is off\n    if (comment.dead && !SettingsStore.showDead) {\n      this.expectedComments--\n    }\n    else {\n      this.commentCount++\n    }\n    // Add the number of kids the comment has to the expected total for the\n    // initial load.\n    if (this.loading && comment.kids) {\n      this.expectedComments += comment.kids.length\n    }\n    // Register the comment as new if it's new, unless it's dead and showDead is off\n    if (this.prevMaxCommentId > 0 &&\n        comment.id > this.prevMaxCommentId &&\n        (!comment.dead || SettingsStore.showDead)) {\n      this.newCommentCount++\n      this.isNew[comment.id] = true\n    }\n    // Keep track of the biggest comment id seen\n    if (comment.id > this.maxCommentId) {\n      this.maxCommentId = comment.id\n    }\n    // We don't want the story to be part of the comment parent hierarchy\n    if (comment.parent !== this.itemId) {\n      this.parents[comment.id] = comment.parent\n    }\n\n    this.numberOfCommentsChanged()\n    if (this.loading) {\n      this.checkLoadCompletion()\n    }\n  },\n\n  /**\n   * A comment which hasn't loaded yet is being delayed.\n   */\n  commentDelayed(commentId) {\n    // Don't wait for delayed comments\n    this.expectedComments--\n  },\n\n  /**\n   * A comment which wasn't previously deleted became deleted.\n   */\n  commentDeleted(comment) {\n    CommentThreadStore.prototype.commentDeleted.call(this, comment)\n    this.commentCount--\n    if (this.isNew[comment.id]) {\n      this.newCommentCount--\n      delete this.isNew[comment.id]\n    }\n    delete this.parents[comment.id]\n    // Trigger debounced callbacks\n    this.numberOfCommentsChanged()\n  },\n\n  /**\n   * A comment which wasn't previously dead became dead.\n   */\n  commentDied(comment) {\n    if (!SettingsStore.showDead) {\n      this.commentCount--\n      if (this.isNew[comment.id]) {\n        this.newCommentCount--\n        delete this.isNew[comment.id]\n      }\n    }\n  },\n\n  /**\n   * Change the expected number of comments if an update was received during\n   * initial loding and trigger a re-check of loading completion.\n   */\n  adjustExpectedComments(change) {\n    this.expectedComments += change\n    this.checkLoadCompletion()\n  },\n\n  collapseThreadsWithoutNewComments() {\n    // Create an id lookup for comments which have a new comment as one of their\n    // descendants. New comments themselves are not added to the lookup.\n    var newCommentIds = Object.keys(this.isNew)\n    var hasNewComments = {}\n    for (var i = 0, l = newCommentIds.length; i < l; i++) {\n      var parent = this.parents[newCommentIds[i]]\n      while (parent) {\n        // Stop when we hit one we've seen before\n        if (hasNewComments[parent]) {\n          break\n        }\n        hasNewComments[parent] = true\n        parent = this.parents[parent]\n      }\n    }\n\n    // Walk the tree of comments one level at a time, only walking children to\n    // comments we know have new comment descendants, to find subtrees which\n    // don't have new comments.\n    // Other comments are marked for collapsing unless they are themselves a\n    // new comment (in which case all their replies must be new too).\n    var shouldCollapse = {}\n    var commentIds = this.children[this.itemId]\n    while (commentIds.length) {\n      var nextCommentIds = []\n      for (i = 0, l = commentIds.length; i < l; i++) {\n        var commentId = commentIds[i]\n        if (!hasNewComments[commentId]) {\n          if (!this.isNew[commentId]) {\n            shouldCollapse[commentId] = true\n          }\n        }\n        else {\n          var childCommentIds = this.children[commentId]\n          if (childCommentIds.length) {\n            nextCommentIds.push.apply(nextCommentIds, childCommentIds)\n          }\n        }\n      }\n      commentIds = nextCommentIds\n    }\n\n    this.isCollapsed = shouldCollapse\n    this.onCommentsChanged({type: 'collapse'})\n  },\n\n  /**\n   * Merk the thread as read.\n   */\n  markAsRead() {\n    this.lastVisit = Date.now()\n    this.newCommentCount = 0\n    this.prevMaxCommentId = this.maxCommentId\n    this.isNew = {}\n    this._storeState()\n  },\n\n  /**\n   * Persist comment thread state and perform any necessary internal cleanup.\n   */\n  dispose() {\n    // Cancel debounced callbacks in case any are pending\n    this.numberOfCommentsChanged.cancel()\n    this._storeState()\n  }\n})\n\nmodule.exports = StoryCommentThreadStore\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/stores/StoryCommentThreadStore.js\n **/","var React = require('react')\nvar ReactFireMixin = require('reactfire')\n\nvar CommentThreadStore = require('./stores/CommentThreadStore')\nvar HNService = require('./services/HNService')\nvar SettingsStore = require('./stores/SettingsStore')\n\nvar CommentMixin = require('./mixins/CommentMixin')\n\nvar cx = require('./utils/buildClassName')\n\n/**\n * A comment in a thread.\n */\nvar Comment = React.createClass({\n  mixins: [CommentMixin, ReactFireMixin],\n\n  propTypes: {\n    id: React.PropTypes.number.isRequired,\n    level: React.PropTypes.number.isRequired,\n    loadingSpinner: React.PropTypes.bool,\n    threadStore: React.PropTypes.instanceOf(CommentThreadStore).isRequired\n  },\n\n  getDefaultProps() {\n    return {\n      loadingSpinner: false\n    }\n  },\n\n  getInitialState() {\n    return {\n      comment: {}\n    }\n  },\n\n  componentWillMount() {\n    this.bindFirebaseRef()\n  },\n\n  componentWillUnmount() {\n    this.clearDelayTimeout()\n  },\n\n  componentDidUpdate(prevProps, prevState) {\n    // Huge, fast-growing threads like https://news.ycombinator.com/item?id=9784470\n    // seem to break the API - some comments are coming back from Firebase as null.\n    if (!this.state.comment) {\n      this.props.threadStore.adjustExpectedComments(-1)\n      return\n    }\n\n    // On !prevState.comment: a comment which was initially null - see\n    // above - may eventually load when the API catches up.\n    if (!prevState.comment || !prevState.comment.id) {\n      // Register a newly-loaded comment with the thread store\n      if (this.state.comment.id) {\n        // If the comment was delayed, cancel any pending timeout\n        if (prevState.comment && prevState.comment.delayed) {\n          this.clearDelayTimeout()\n        }\n        this.props.threadStore.commentAdded(this.state.comment)\n      }\n      if (prevState.comment && !prevState.comment.delayed && this.state.comment.delayed) {\n        this.props.threadStore.commentDelayed(this.props.id)\n      }\n    }\n    // The comment was already loaded, look for changes to it\n    else {\n      if (!prevState.comment.deleted && this.state.comment.deleted) {\n        this.props.threadStore.commentDeleted(this.state.comment)\n      }\n      if (!prevState.comment.dead && this.state.comment.dead) {\n        this.props.threadStore.commentDied(this.state.comment)\n      }\n      // If the comment has been updated and the initial set of comments is\n      // still loading, the number of expected comments might need to be\n      // adjusted.\n      else if (prevState.comment !== this.state.comment &&\n               this.props.threadStore.loading) {\n        var kids = (this.state.comment.kids ? this.state.comment.kids.length : 0)\n        var prevKids = (prevState.comment.kids ? prevState.comment.kids.length : 0)\n        this.props.threadStore.adjustExpectedComments(kids - prevKids)\n      }\n    }\n  },\n\n  bindFirebaseRef() {\n    this.bindAsObject(HNService.itemRef(this.props.id), 'comment', this.handleFirebaseRefCancelled)\n    if (this.timeout) {\n      this.timeout = null\n    }\n  },\n\n  /**\n   * This is usually caused by a permissions error loading the comment due to\n   * its author using the delay setting (note: this is conjecture), which is\n   * measured in minutes - try again in 30 seconds.\n   */\n  handleFirebaseRefCancelled(e) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.error('Firebase ref for comment ' + this.props.id + ' was cancelled: ' + e.message)\n    }\n    this.unbind('comment')\n    this.timeout = setTimeout(this.bindFirebaseRef, 30000)\n    if (this.state.comment && !this.state.comment.delayed) {\n      this.state.comment.delayed = true\n      this.forceUpdate()\n    }\n  },\n\n  clearDelayTimeout() {\n    if (this.timeout) {\n      clearTimeout(this.timeout)\n      this.timeout = null\n    }\n  },\n\n  toggleCollapse(e) {\n    e.preventDefault()\n    this.props.threadStore.toggleCollapse(this.state.comment.id)\n  },\n\n  render() {\n    var comment = this.state.comment\n    var props = this.props\n    if (!comment) {\n      return this.renderError(comment, {\n        id: this.props.id,\n        className: 'Comment Comment--error Comment--level' + props.level\n      })\n    }\n    // Render a placeholder while we're waiting for the comment to load\n    if (!comment.id) { return this.renderCommentLoading(comment) }\n    // Don't show dead coments or their children, when configured\n    if (comment.dead && !SettingsStore.showDead) { return null }\n    // Render a link to HN for deleted comments if they're being displayed\n    if (comment.deleted) {\n      if (!SettingsStore.showDeleted) { return null }\n      return this.renderCommentDeleted(comment, {\n        className: 'Comment Comment--deleted Comment--level' + props.level\n      })\n    }\n\n    var isNew = props.threadStore.isNew[comment.id]\n    var collapsed = !!props.threadStore.isCollapsed[comment.id]\n    var childCounts = (collapsed && props.threadStore.getChildCounts(comment))\n    if (collapsed && isNew) { childCounts.newComments = 0 }\n    var className = cx('Comment Comment--level' + props.level, {\n      'Comment--collapsed': collapsed,\n      'Comment--dead': comment.dead,\n      'Comment--new': isNew\n    })\n\n    return <div className={className}>\n      <div className=\"Comment__content\">\n        {this.renderCommentMeta(comment, {\n          collapsible: true,\n          collapsed: collapsed,\n          link: true,\n          childCounts: childCounts\n        })}\n        {this.renderCommentText(comment, {replyLink: true})}\n      </div>\n      {comment.kids && <div className=\"Comment__kids\">\n        {comment.kids.map(function(id) {\n          return <Comment key={id} id={id}\n            level={props.level + 1}\n            loadingSpinner={props.loadingSpinner}\n            threadStore={props.threadStore}\n          />\n        })}\n      </div>}\n    </div>\n  }\n})\n\nmodule.exports = Comment\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/Comment.js\n **/","var React = require('react')\nvar {Link} = require('react-router')\n\nvar Paginator = React.createClass({\n  _onClick(e) {\n    setTimeout(function() { window.scrollTo(0, 0) }, 0)\n  },\n\n  render() {\n    if (this.props.page === 1 && !this.props.hasNext) { return null }\n    return <div className=\"Paginator\">\n      {this.props.page > 1 && <span className=\"Paginator__prev\">\n        <Link to={`/${this.props.route}`} query={{page: this.props.page - 1}} onClick={this._onClick}>Prev</Link>\n      </span>}\n      {this.props.page > 1 && this.props.hasNext && ' | '}\n      {this.props.hasNext && <span className=\"Paginator__next\">\n        <Link to={`/${this.props.route}`} query={{page: this.props.page + 1}} onClick={this._onClick}>More</Link>\n      </span>}\n    </div>\n  }\n})\n\nmodule.exports = Paginator\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/Paginator.js\n **/","var React = require('react')\nvar {Link} = require('react-router')\n\nvar SettingsStore = require('../stores/SettingsStore')\nvar cx = require('../utils/buildClassName')\n\n/**\n * Reusable logic for displaying an item in a list.\n * Must be used in conjunction with ItemMixin for its rendering methods.\n */\nvar ListItemMixin = {\n  getNewCommentCount(item, threadState) {\n    if (threadState.lastVisit === null) {\n      return 0\n    }\n    return item.descendants - threadState.commentCount\n  },\n\n  renderListItem(item, threadState) {\n    if (item.deleted) { return null }\n    var newCommentCount = this.getNewCommentCount(item, threadState)\n    return <li className={cx('ListItem', {'ListItem--dead': item.dead})} style={{marginBottom: SettingsStore.listSpacing}}>\n      {this.renderItemTitle(item)}\n      {this.renderItemMeta(item, (newCommentCount > 0 && <span className=\"ListItem__newcomments\">{' '}\n        (<Link to={`/${item.type}/${item.id}`}>\n          {newCommentCount} new\n        </Link>)\n      </span>))}\n    </li>\n  }\n}\n\nmodule.exports = ListItemMixin\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/mixins/ListItemMixin.js\n **/","var PageNumberMixin = {\n  getPageNumber(page) {\n    if (typeof page == 'undefined') {\n      page = this.props.location.query.page\n    }\n    return (page && /^\\d+$/.test(page) ? Math.max(1, Number(page)) : 1)\n  }\n}\n\nmodule.exports = PageNumberMixin\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/mixins/PageNumberMixin.js\n **/","var HNService = require('../services/HNService')\n\nvar StoryStore = require('./StoryStore')\nvar UpdatesStore = require('./UpdatesStore')\n\nvar commentParentLookup = {}\nvar titleCache = {}\n\nfunction fetchCommentParent(comment, cb, result) {\n  var commentId = comment.id\n  var parentId = comment.parent\n\n  while (commentParentLookup[parentId] || titleCache[parentId]) {\n    // We just saved ourselves an item fetch\n    result.itemCount++\n    result.cacheHits++\n\n    // The parent is a known non-comment\n    if (titleCache[parentId]) {\n      if (result.itemCount === 1) { result.parent = titleCache[parentId] }\n      result.op = titleCache[parentId]\n      cb(result)\n      return\n    }\n\n    // The parent is a known comment\n    if (commentParentLookup[parentId]) {\n      if (result.itemCount === 1) { result.parent = {id: parentId, type: 'comment'} }\n      // Set the parent comment's ids up for the next iteration\n      commentId = parentId\n      parentId = commentParentLookup[parentId]\n    }\n  }\n\n  // The parent of the current comment isn't known, so we'll have to fetch it\n  ItemStore.getItem(parentId, function(parent) {\n    result.itemCount++\n    // Add the current comment's parent to the lookup for next time\n    commentParentLookup[commentId] = parentId\n    if (parent.type === 'comment') {\n      commentParentLookup[parent.id] = parent.parent\n    }\n    processCommentParent(parent, cb, result)\n  }, result)\n}\n\nfunction processCommentParent(item, cb, result) {\n  if (result.itemCount === 1) {\n    result.parent = item\n  }\n  if (item.type !== 'comment') {\n    result.op = item\n    titleCache[item.id] = {\n      id: item.id,\n      type: item.type,\n      title: item.title\n    }\n    cb(result)\n  }\n  else {\n    fetchCommentParent(item, cb, result)\n  }\n}\n\nvar ItemStore = {\n  getItem(id, cb, result) {\n    var cachedItem = this.getCachedItem(id)\n    if (cachedItem) {\n      if (result) {\n        result.cacheHits++\n      }\n      setImmediate(cb, cachedItem)\n    }\n    else {\n      HNService.fetchItem(id, cb)\n    }\n  },\n\n  getCachedItem(id) {\n    return StoryStore.getItem(id) || UpdatesStore.getItem(id) || null\n  },\n\n  getCachedStory(id) {\n    return StoryStore.getItem(id) || UpdatesStore.getStory(id) || null\n  },\n\n  fetchCommentAncestors(comment, cb) {\n    var startTime = Date.now()\n    var result = {itemCount: 0, cacheHits: 0}\n    fetchCommentParent(comment, function() {\n      result.timeTaken = Date.now() - startTime\n      setImmediate(cb, result)\n    }, result)\n  }\n}\n\nmodule.exports = ItemStore\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/stores/ItemStore.js\n **/","function pageCalc(pageNum, pageSize, numItems) {\n  var startIndex = (pageNum - 1) * pageSize\n  var endIndex = Math.min(numItems, startIndex + pageSize)\n  var hasNext = endIndex < numItems - 1\n  return {pageNum, startIndex, endIndex, hasNext}\n}\n\nmodule.exports = pageCalc\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/utils/pageCalc.js\n **/","module.exports = {\n  get(key, defaultValue) {\n    var value = window.localStorage[key]\n    return (typeof value != 'undefined' ? value : defaultValue)\n  },\n  set(key, value) {\n    window.localStorage[key] = value\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/utils/storage.js\n **/","var React = require('react')\nvar {Link} = require('react-router')\n\nvar Settings = require('./Settings')\n\nvar StoryStore = require('./stores/StoryStore')\nvar UpdatesStore = require('./stores/UpdatesStore')\nvar SettingsStore = require('./stores/SettingsStore')\n\nvar App = React.createClass({\n  getInitialState() {\n    return {\n      showSettings: false\n    }\n  },\n\n  componentWillMount() {\n    SettingsStore.load()\n    StoryStore.loadSession()\n    UpdatesStore.loadSession()\n    window.addEventListener('beforeunload', this.handleBeforeUnload)\n  },\n\n  componentWillUnmount() {\n    window.removeEventListener('beforeunload', this.handleBeforeUnload)\n  },\n\n  /**\n   * Give stores a chance to persist data to sessionStorage in case this is a\n   * refresh or an external link in the same tab.\n   */\n  handleBeforeUnload() {\n    StoryStore.saveSession()\n    UpdatesStore.saveSession()\n  },\n\n  toggleSettings(e) {\n    e.preventDefault()\n    this.setState({showSettings: !this.state.showSettings})\n  },\n\n  render() {\n    return <div className=\"App\" onClick={this.state.showSettings && this.toggleSettings}>\n      <div className=\"App__wrap\">\n      <div className=\"App__header\">\n        <img src=\"logo.png\" width=\"16\" height=\"16\" alt=\"\" />{' '}\n        <Link to=\"/news\" activeClassName=\"active\" className=\"App__homelink\">React HN</Link>{' '}\n        <Link to=\"/newest\" activeClassName=\"active\">new</Link>{' | '}\n        <Link to=\"/newcomments\" activeClassName=\"active\">comments</Link> {' | '}\n        <Link to=\"/show\" activeClassName=\"active\">show</Link>{' | '}\n        <Link to=\"/ask\" activeClassName=\"active\">ask</Link>{' | '}\n        <Link to=\"/jobs\" activeClassName=\"active\">jobs</Link>\n        <a className=\"App__settings\" tabIndex=\"0\" onClick={this.toggleSettings} onKeyPress={this.toggleSettings}>\n          {this.state.showSettings ? 'hide settings' : 'settings'}\n        </a>\n        {this.state.showSettings && <Settings key=\"settings\"/>}\n      </div>\n      <div className=\"App__content\">\n        {this.props.children}\n      </div>\n      <div className=\"App__footer\">\n        {`react-hn v${__VERSION__} | `}\n        <a href=\"https://github.com/insin/react-hn\">insin/react-hn</a>\n      </div>\n      </div>\n    </div>\n  }\n})\n\nmodule.exports = App\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/App.js\n **/","var React = require('react')\n\nvar SettingsStore = require('./stores/SettingsStore')\n\nvar CommentMixin = require('./mixins/CommentMixin')\n\nvar cx = require('./utils/buildClassName')\n\n/**\n * Displays a standalone comment passed as a prop.\n */\nvar DisplayComment = React.createClass({\n  mixins: [CommentMixin],\n\n  propTypes: {\n    comment: React.PropTypes.object.isRequired\n  },\n\n  getInitialState() {\n    return {\n      op: {},\n      parent: {type: 'comment'}\n    }\n  },\n\n  componentWillMount() {\n    this.fetchAncestors(this.props.comment)\n  },\n\n  render() {\n    if (this.props.comment.deleted) { return null }\n    if (this.props.comment.dead && !SettingsStore.showDead) { return null }\n\n    var comment = this.props.comment\n    var className = cx('Comment Comment--level0', {\n      'Comment--dead': comment.dead\n    })\n\n    return <div className={className}>\n      <div className=\"Comment__content\">\n        {this.renderCommentMeta(comment, {\n          link: true,\n          parent: !!this.state.parent.id && !!this.state.op.id && comment.parent !== this.state.op.id,\n          op: !!this.state.op.id\n        })}\n        {this.renderCommentText(comment, {replyLink: false})}\n      </div>\n    </div>\n  }\n})\n\nmodule.exports = DisplayComment\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/DisplayComment.js\n **/","var React = require('react')\n\nvar StoryCommentThreadStore = require('./stores/StoryCommentThreadStore')\n\nvar ItemMixin = require('./mixins/ItemMixin')\nvar ListItemMixin = require('./mixins/ListItemMixin')\n\n/**\n * Display story title and metadata as a list item.\n * The story to display will be passed as a prop.\n */\nvar DisplayListItem = React.createClass({\n  mixins: [ItemMixin, ListItemMixin],\n\n  propTypes: {\n    item: React.PropTypes.object.isRequired\n  },\n\n  componentWillMount() {\n    this.threadState = StoryCommentThreadStore.loadState(this.props.item.id)\n  },\n\n  render() {\n    return this.renderListItem(this.props.item, this.threadState)\n  }\n})\n\nmodule.exports = DisplayListItem\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/DisplayListItem.js\n **/","var React = require('react')\nvar ReactFireMixin = require('reactfire')\nvar TimeAgo = require('react-timeago')\n\nvar HNService = require('./services/HNService')\nvar StoryCommentThreadStore = require('./stores/StoryCommentThreadStore')\nvar ItemStore = require('./stores/ItemStore')\n\nvar Comment = require('./Comment')\nvar PollOption = require('./PollOption')\nvar Spinner = require('./Spinner')\nvar ItemMixin = require('./mixins/ItemMixin')\n\nvar cx = require('./utils/buildClassName')\nvar setTitle = require('./utils/setTitle')\n\nfunction timeUnitsAgo(value, unit, suffix) {\n  if (value === 1) {\n    return unit\n  }\n  return `${value} ${unit}s`\n}\n\nvar Item = React.createClass({\n  mixins: [ItemMixin, ReactFireMixin],\n\n  getInitialState() {\n    return {\n      item: ItemStore.getCachedStory(Number(this.props.params.id)) || {}\n    }\n  },\n\n  componentWillMount() {\n    this.bindAsObject(HNService.itemRef(this.props.params.id), 'item')\n    if (this.state.item.id) {\n      this.threadStore = new StoryCommentThreadStore(this.state.item, this.handleCommentsChanged, {cached: true})\n      setTitle(this.state.item.title)\n    }\n    window.addEventListener('beforeunload', this.handleBeforeUnload)\n  },\n\n  componentWillUnmount() {\n    if (this.threadStore) {\n      this.threadStore.dispose()\n    }\n    window.removeEventListener('beforeunload', this.handleBeforeUnload)\n  },\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.params.id !== nextProps.params.id) {\n      // Tear it down...\n      this.threadStore.dispose()\n      this.threadStore = null\n      this.unbind('item')\n      // ...and set it up again\n      var item = ItemStore.getCachedStory(Number(nextProps.params.id))\n      if (item) {\n        this.threadStore = new StoryCommentThreadStore(item, this.handleCommentsChanged, {cached: true})\n        setTitle(item.title)\n      }\n      this.bindAsObject(HNService.itemRef(nextProps.params.id), 'item')\n      this.setState({item: item || {}})\n    }\n  },\n\n  componentWillUpdate(nextProps, nextState) {\n    // Update the title when the item has loaded.\n    if (!this.state.item.id && nextState.item.id) {\n      setTitle(nextState.item.title)\n    }\n  },\n\n  componentDidUpdate(prevProps, prevState) {\n    // If the state item id changed, an initial or new item must have loaded\n    if (prevState.item.id !== this.state.item.id) {\n      if (!this.threadStore || this.threadStore.itemId !== this.state.item.id) {\n        this.threadStore = new StoryCommentThreadStore(this.state.item, this.handleCommentsChanged, {cached: false})\n        setTitle(this.state.item.title)\n        this.forceUpdate()\n      }\n    }\n    else if (prevState.item !== this.state.item) {\n      // If the item has been updated from Firebase and the initial set\n      // of comments is still loading, the number of expected comments might\n      // need to be adjusted.\n      // This triggers a check for thread load completion, completing it\n      // immediately if a cached item had 0 kids and the latest version from\n      // Firebase also has 0 kids.\n      if (this.threadStore.loading) {\n        var kids = (this.state.item.kids ? this.state.item.kids.length : 0)\n        var prevKids = (prevState.item.kids ? prevState.item.kids.length : 0)\n        var kidDiff = kids - prevKids\n        if (kidDiff !== 0) {\n          this.threadStore.adjustExpectedComments(kidDiff)\n        }\n      }\n      this.threadStore.itemUpdated(this.state.item)\n    }\n  },\n\n  /**\n   * Ensure the last visit time and comment details get stored for this item if\n   * the user refreshes or otherwise navigates off the page.\n   */\n  handleBeforeUnload() {\n    if (this.threadStore) {\n      this.threadStore.dispose()\n    }\n  },\n\n  handleCommentsChanged(payload) {\n    this.forceUpdate()\n  },\n\n  autoCollapse(e) {\n    e.preventDefault()\n    this.threadStore.collapseThreadsWithoutNewComments()\n  },\n\n  markAsRead(e) {\n    e.preventDefault()\n    this.threadStore.markAsRead()\n    this.forceUpdate()\n  },\n\n  render() {\n    var state = this.state\n    var item = state.item\n    var threadStore = this.threadStore\n    if (!item.id || !threadStore) { return <div className=\"Item Item--loading\"><Spinner size=\"20\"/></div> }\n    return <div className={cx('Item', {'Item--dead': item.dead})}>\n      <div className=\"Item__content\">\n        {this.renderItemTitle(item)}\n        {this.renderItemMeta(item, (threadStore.lastVisit !== null && threadStore.newCommentCount > 0 && <span>{' '}\n          (<em>{threadStore.newCommentCount} new</em> in the last <TimeAgo date={threadStore.lastVisit} formatter={timeUnitsAgo}/>{') | '}\n          <span className=\"control\" tabIndex=\"0\" onClick={this.autoCollapse} onKeyPress={this.autoCollapse} title=\"Collapse threads without new comments\">\n            auto collapse\n          </span>{' | '}\n          <span className=\"control\" tabIndex=\"0\" onClick={this.markAsRead} onKeyPress={this.markAsRead}>\n            mark as read\n          </span>\n        </span>))}\n        {item.text && <div className=\"Item__text\">\n          <div dangerouslySetInnerHTML={{__html: item.text}}/>\n        </div>}\n        {item.type === 'poll' && <div className=\"Item__poll\">\n          {item.parts.map(function(id) {\n            return <PollOption key={id} id={id}/>\n          })}\n        </div>}\n      </div>\n      {item.kids && <div className=\"Item__kids\">\n        {item.kids.map(function(id, index) {\n          return <Comment key={id} id={id} level={0}\n            loadingSpinner={index === 0}\n            threadStore={threadStore}\n          />\n        })}\n      </div>}\n    </div>\n  }\n})\n\nmodule.exports = Item\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/Item.js\n **/","var React = require('react')\n\nvar NotFound = React.createClass({\n  render() {\n    return <h2>Not found</h2>\n  }\n})\n\nmodule.exports = NotFound\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/NotFound.js\n **/","var React = require('react')\nvar ReactFireMixin = require('reactfire')\n\nvar CommentThreadStore = require('./stores/CommentThreadStore')\nvar HNService = require('./services/HNService')\nvar SettingsStore = require('./stores/SettingsStore')\nvar UpdatesStore = require('./stores/UpdatesStore')\n\nvar Comment = require('./Comment')\nvar CommentMixin = require('./mixins/CommentMixin')\n\nvar cx = require('./utils/buildClassName')\nvar setTitle = require('./utils/setTitle')\n\nvar PermalinkedComment = React.createClass({\n  mixins: [CommentMixin, ReactFireMixin],\n\n  getDefaultProps() {\n    return {\n      level: 0,\n      loadingSpinner: true\n    }\n  },\n\n  getInitialState() {\n    return {\n      comment: UpdatesStore.getComment(this.props.params.id) || {},\n      parent: {type: 'comment'},\n      op: {}\n    }\n  },\n\n  componentWillMount() {\n    this.bindAsObject(HNService.itemRef(this.props.params.id), 'comment')\n    if (this.state.comment.id) {\n      this.commentLoaded(this.state.comment)\n    }\n  },\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.params.id !== this.props.params.id) {\n      var comment = UpdatesStore.getComment(nextProps.params.id)\n      if (comment) {\n        this.commentLoaded(comment)\n        this.setState({comment: comment})\n      }\n      this.unbind('comment')\n      this.bindAsObject(HNService.itemRef(nextProps.params.id), 'comment')\n    }\n  },\n\n  componentWillUpdate(nextProps, nextState) {\n    if (!nextState.comment) {\n      return\n    }\n\n    if (this.state.comment.id !== nextState.comment.id) {\n      if (!nextState.comment.deleted) {\n        // Redirect to the appropriate route if a Comment \"parent\" link had a\n        // non-comment item id.\n        if (nextState.comment.type !== 'comment') {\n          this.context.router.replaceWith(nextState.comment.type, {id: nextState.comment.id})\n          return\n        }\n      }\n      if (!this.threadStore || this.threadStore.itemId !== nextState.comment.id) {\n        this.commentLoaded(nextState.comment)\n      }\n    }\n  },\n\n  commentLoaded(comment) {\n    this.setTitle(comment)\n    if (!comment.deleted) {\n      this.threadStore = new CommentThreadStore(comment, this.handleCommentsChanged)\n      this.fetchAncestors(comment)\n    }\n  },\n\n  setTitle(comment) {\n    if (comment.deleted) {\n      return setTitle('Deleted comment')\n    }\n    var title = 'Comment by ' + comment.by\n    if (this.state.op.id) {\n      title += ' | ' + this.state.op.title\n    }\n    setTitle(title)\n  },\n\n  handleCommentsChanged(payload) {\n    // We're only interested in re-rendering to update collapsed display\n    if (payload.type === 'collapse') {\n      this.forceUpdate()\n    }\n  },\n\n  render() {\n    var comment = this.state.comment\n    if (!comment) {\n      return this.renderError(comment, {\n        id: this.props.params.id,\n        className: 'Comment Comment--level0 Comment--error'\n      })\n    }\n    // Render a placeholder while we're waiting for the comment to load\n    if (!comment.id) { return this.renderCommentLoading(comment) }\n    // Render a link to HN for deleted comments\n    if (comment.deleted) {\n      return this.renderCommentDeleted(comment, {\n        className: 'Comment Comment--level0 Comment--deleted'\n      })\n    }\n    // XXX Don't render anything if we're replacing the route after loading a non-comment\n    if (comment.type !== 'comment') { return null }\n\n    var className = cx('PermalinkedComment Comment Comment--level0', {'Comment--dead': comment.dead})\n    var threadStore = this.threadStore\n\n    return <div className={className}>\n      <div className=\"Comment__content\">\n        {this.renderCommentMeta(comment, {\n          parent: !!this.state.parent.id && !!this.state.op.id && comment.parent !== this.state.op.id,\n          op: !!this.state.op.id\n        })}\n        {(!comment.dead || SettingsStore.showDead) && this.renderCommentText(comment, {replyLink: true})}\n      </div>\n      {comment.kids && <div className=\"Comment__kids\">\n        {comment.kids.map(function(id, index) {\n          return <Comment key={id} id={id}\n            level={0}\n            loadingSpinner={index === 0}\n            threadStore={threadStore}\n          />\n        })}\n      </div>}\n    </div>\n  }\n})\n\nmodule.exports = PermalinkedComment\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/PermalinkedComment.js\n **/","var React = require('react')\nvar ReactFireMixin = require('reactfire')\n\nvar HNService = require('./services/HNService')\n\nvar Spinner = require('./Spinner')\n\nvar pluralise = require('./utils/pluralise')\n\nvar PollOption = React.createClass({\n  mixins: [ReactFireMixin],\n\n  getInitialState() {\n    return {pollopt: {}}\n  },\n\n  componentWillMount() {\n    this.bindAsObject(HNService.itemRef(this.props.id), 'pollopt')\n  },\n\n  render() {\n    var pollopt = this.state.pollopt\n    if (!pollopt.id) { return <div className=\"PollOption PollOption--loading\"><Spinner size=\"20\"/></div> }\n    return <div className=\"PollOption\">\n      <div className=\"PollOption__text\">\n        {pollopt.text}\n      </div>\n      <div className=\"PollOption__score\">\n        {pollopt.score} point{pluralise(pollopt.score)}\n      </div>\n    </div>\n  }\n})\n\nmodule.exports = PollOption\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/PollOption.js\n **/","var React = require('react')\n\nvar SettingsStore = require('./stores/SettingsStore')\n\nvar Settings = React.createClass({\n  componentDidMount() {\n    this.refs.container.focus()\n  },\n\n  onChange(e) {\n    var el = e.target\n    if (el.type === 'checkbox') {\n      SettingsStore[el.name] = el.checked\n    }\n    else if (el.type === 'number' && el.value) {\n      SettingsStore[el.name] = el.value\n    }\n    this.forceUpdate()\n    SettingsStore.save()\n  },\n\n  onClick(e) {\n    e.stopPropagation()\n  },\n\n  render() {\n    return <div ref=\"container\" className=\"Settings\" tabIndex=\"-1\" onClick={this.onClick}>\n      <form onChange={this.onChange}>\n        <div className=\"Settings__setting Settings__setting--checkbox\">\n          <label htmlFor=\"autoCollapse\">\n            <input type=\"checkbox\" name=\"autoCollapse\" id=\"autoCollapse\" checked={SettingsStore.autoCollapse}/> auto collapse\n          </label>\n          <p>Automatically collapse comment threads without new comments on page load.</p>\n        </div>\n        <div className=\"Settings__setting Settings__setting--checkbox\">\n          <label htmlFor=\"replyLinks\">\n            <input type=\"checkbox\" name=\"replyLinks\" id=\"replyLinks\" checked={SettingsStore.replyLinks}/> show reply links\n          </label>\n          <p>Show \"reply\" links to Hacker News</p>\n        </div>\n        <div className=\"Settings__setting Settings__setting--checkbox\">\n          <label htmlFor=\"showDead\">\n            <input type=\"checkbox\" name=\"showDead\" id=\"showDead\" checked={SettingsStore.showDead}/> show dead\n          </label>\n          <p>Show items flagged as dead.</p>\n        </div>\n        <div className=\"Settings__setting Settings__setting--checkbox\">\n          <label htmlFor=\"showDeleted\">\n            <input type=\"checkbox\" name=\"showDeleted\" id=\"showDeleted\" checked={SettingsStore.showDeleted}/> show deleted\n          </label>\n          <p>Show comments flagged as deleted in threads.</p>\n        </div>\n        <div className=\"Settings__setting\">\n          <table>\n            <tbody>\n              <tr>\n                <td><label htmlFor=\"titleFontSize\">title font size:</label></td>\n                <td><input type=\"number\" min=\"13.333\" step=\"1\" name=\"titleFontSize\" id=\"titleFontSize\" value={SettingsStore.titleFontSize}/></td>\n              </tr>\n              <tr>\n                <td><label htmlFor=\"listSpacing\">list spacing:</label></td>\n                <td><input type=\"number\" min=\"0\" name=\"listSpacing\" id=\"listSpacing\" value={SettingsStore.listSpacing}/></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </form>\n    </div>\n  }\n})\n\nmodule.exports = Settings\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/Settings.js\n **/","var React = require('react')\n\nvar StoryStore = require('./stores/StoryStore')\n\nvar PageNumberMixin = require('./mixins/PageNumberMixin')\nvar Paginator = require('./Paginator')\nvar Spinner = require('./Spinner')\nvar StoryListItem = require('./StoryListItem')\nvar SettingsStore = require('./stores/SettingsStore')\n\nvar {ITEMS_PER_PAGE} = require('./utils/constants')\nvar pageCalc = require('./utils/pageCalc')\nvar setTitle = require('./utils/setTitle')\n\nvar Stories = React.createClass({\n  mixins: [PageNumberMixin],\n\n  propTypes: {\n    // The number of stories which may be paginated through\n    limit: React.PropTypes.number.isRequired,\n    // The route name being used\n    route: React.PropTypes.string.isRequired,\n    // The type of stories to be displayed\n    type: React.PropTypes.string.isRequired,\n\n    // Page title associated with the stories being displayed\n    title: React.PropTypes.string\n  },\n\n  getInitialState() {\n    return {\n      ids: [],\n      limit: this.props.limit,\n      stories: []\n    }\n  },\n\n  componentWillMount() {\n    setTitle(this.props.title)\n    this.store = new StoryStore(this.props.type)\n    this.store.addListener('update', this.handleUpdate)\n    this.store.start()\n    this.setState(this.store.getState())\n  },\n\n  componentWillUnmount() {\n    this.store.removeListener('update', this.handleUpdate)\n    this.store.stop()\n    this.store = null\n  },\n\n  handleUpdate(update) {\n    if (!this.isMounted()) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\n          `Skipping update as the ${this.props.type} Stories component is no longer mounted.`\n        )\n      }\n      return\n    }\n    update.limit = update.ids.length\n    this.setState(update)\n  },\n\n  render() {\n    var page = pageCalc(this.getPageNumber(), ITEMS_PER_PAGE, this.state.limit)\n\n    // Display a list of placeholder items while we're waiting for the initial\n    // list of story ids to load from Firebase.\n    if (this.state.stories.length === 0 && this.state.ids.length === 0) {\n      var dummyItems = []\n      for (var i = page.startIndex; i < page.endIndex; i++) {\n        dummyItems.push(\n          <li key={i} className=\"ListItem ListItem--loading\" style={{marginBottom: SettingsStore.listSpacing}}>\n            <Spinner/>\n          </li>\n        )\n      }\n      return <div className=\"Items Items--loading\">\n        <ol className=\"Items__list\" start={page.startIndex + 1}>{dummyItems}</ol>\n        <Paginator route={this.props.route} page={page.pageNum} hasNext={page.hasNext}/>\n      </div>\n    }\n\n    return <div className=\"Items\">\n      <ol className=\"Items__list\" start={page.startIndex + 1}>\n        {this.renderItems(page.startIndex, page.endIndex)}\n      </ol>\n      <Paginator route={this.props.route} page={page.pageNum} hasNext={page.hasNext}/>\n    </div>\n  },\n\n  renderItems(startIndex, endIndex) {\n    var rendered = []\n    for (var i = startIndex; i < endIndex; i++) {\n      var item = this.state.stories[i]\n      var id = this.state.ids[i]\n      if (id) {\n        rendered.push(<StoryListItem key={id} id={id} index={i} cachedItem={item} store={this.store}/>)\n      }\n      else {\n        rendered.push(<StoryListItem cachedItem={item} store={this.store}/>)\n      }\n    }\n    return rendered\n  }\n})\n\nmodule.exports = Stories\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/Stories.js\n **/","var React = require('react')\nvar ReactFireMixin = require('reactfire')\n\nvar StoryCommentThreadStore = require('./stores/StoryCommentThreadStore')\nvar HNService = require('./services/HNService')\nvar SettingsStore = require('./stores/SettingsStore')\nvar StoryStore = require('./stores/StoryStore')\n\nvar ItemMixin = require('./mixins/ItemMixin')\nvar ListItemMixin = require('./mixins/ListItemMixin')\nvar Spinner = require('./Spinner')\n\n/**\n * Display story title and metadata as as a list item.\n * Cached story data may be given as a prop, but this component is also\n * responsible for listening to updates to the story and providing the latest\n * version for StoryStore's cache.\n */\nvar StoryListItem = React.createClass({\n  mixins: [ItemMixin, ListItemMixin, ReactFireMixin],\n\n  propTypes: {\n    // The StoryStore handling caching and updates to the stories being displayed\n    store: React.PropTypes.instanceOf(StoryStore).isRequired,\n\n    // The story's id in Hacker News\n    id: React.PropTypes.number,\n    // A version of the story from the cache, for initial display\n    cachedItem: React.PropTypes.object,\n    // The current index of the story in the list being displayed\n    index: React.PropTypes.number\n  },\n\n  getDefaultProps() {\n    return {\n      id: null,\n      cachedItem: null,\n      index: null\n    }\n  },\n\n  getInitialState() {\n    return {\n      item: this.props.cachedItem || {}\n    }\n  },\n\n  componentWillMount() {\n    if (this.props.id != null) {\n      this.initLiveItem(this.props)\n    }\n    else if (this.props.cachedItem != null) {\n      // Display the comment state of the cached item we were given while we're\n      // waiting for the live item to load.\n      this.threadState = StoryCommentThreadStore.loadState(this.state.item.id)\n    }\n  },\n\n  componentWillUnmount() {\n    if (this.props.id != null) {\n      this.props.store.removeListener(this.props.id, this.updateThreadState)\n    }\n  },\n\n  /**\n   * Catch the transition from not having an id prop to having one.\n   * Scenario: we were waiting for the initial list of story ids to load.\n   */\n  componentWillReceiveProps(nextProps) {\n    if (this.props.id == null && nextProps.id != null) {\n      this.initLiveItem(nextProps)\n    }\n  },\n\n  /**\n   * If the live item has been loaded or updated, update the StoryStore cache\n   * with its current index and latest data.\n   */\n  componentWillUpdate(nextProps, nextState) {\n    if (this.state.item !== nextState.item) {\n      if (nextState.item != null) {\n        this.props.store.itemUpdated(nextState.item, this.props.index)\n      }\n      else {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(`Item ${this.props.id} went from ${JSON.stringify(this.state.item)} to ${nextProps.item}`)\n        }\n      }\n    }\n  },\n\n  /**\n   * Initialise listening to updates for the item with the given id and\n   * initialise its comment thread state.\n   */\n  initLiveItem(props) {\n    // If we were given a cached item to display initially, it will be replaced\n    this.bindAsObject(HNService.itemRef(props.id), 'item')\n    this.threadState = StoryCommentThreadStore.loadState(props.id)\n    this.props.store.addListener(props.id, this.updateThreadState)\n  },\n\n  /**\n   * Update thread state in response to a storage event indicating it has been\n   * modified.\n   */\n  updateThreadState() {\n    this.threadState = StoryCommentThreadStore.loadState(this.props.id)\n    this.forceUpdate()\n  },\n\n  render() {\n    // Display the loading spinner if we have nothing to show initially\n    if (!this.state.item || !this.state.item.id) {\n      return <li className=\"ListItem ListItem--loading\" style={{marginBottom: SettingsStore.listSpacing}}>\n        <Spinner/>\n      </li>\n    }\n\n    return this.renderListItem(this.state.item, this.threadState)\n  }\n})\n\nmodule.exports = StoryListItem\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/StoryListItem.js\n **/","var React = require('react')\n\nvar SettingsStore = require('./stores/SettingsStore')\nvar UpdatesStore = require('./stores/UpdatesStore')\n\nvar DisplayListItem = require('./DisplayListItem')\nvar DisplayComment = require('./DisplayComment')\nvar Paginator = require('./Paginator')\nvar Spinner = require('./Spinner')\n\nvar PageNumberMixin = require('./mixins/PageNumberMixin')\n\nvar {ITEMS_PER_PAGE} = require('./utils/constants')\nvar pageCalc = require('./utils/pageCalc')\nvar setTitle = require('./utils/setTitle')\n\nfunction filterDead(item) {\n  return !item.dead\n}\n\nfunction filterUpdates(updates) {\n  if (!SettingsStore.showDead) {\n    return {\n      comments: updates.comments.filter(filterDead),\n      stories: updates.stories.filter(filterDead)\n    }\n  }\n  return updates\n}\n\nvar Updates = React.createClass({\n  mixins: [PageNumberMixin],\n\n  getInitialState() {\n    return filterUpdates(UpdatesStore.getUpdates())\n  },\n\n  componentWillMount() {\n    this.setTitle(this.props.type)\n    UpdatesStore.start()\n    UpdatesStore.on('updates', this.handleUpdates)\n  },\n\n  componentWillUnmount() {\n    UpdatesStore.off('updates', this.handleUpdates)\n    UpdatesStore.stop()\n  },\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.type !== nextProps.type) {\n      this.setTitle(nextProps.type)\n    }\n  },\n\n  setTitle(type) {\n    setTitle('New ' + (type === 'comments' ? 'Comments' : 'Links'))\n  },\n\n  handleUpdates(updates) {\n    if (!this.isMounted()) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Skipping update of ' + this.props.type + ' as the Updates component is not mounted')\n      }\n      return\n    }\n    this.setState(filterUpdates(updates))\n  },\n\n  render() {\n    var items = (this.props.type === 'comments' ? this.state.comments : this.state.stories)\n    if (items.length === 0) {\n      return <div className=\"Updates Updates--loading\"><Spinner size=\"20\"/></div>\n    }\n\n    var page = pageCalc(this.getPageNumber(), ITEMS_PER_PAGE, items.length)\n\n    if (this.props.type === 'comments') {\n      return <div className=\"Updates Comments\">\n        {items.slice(page.startIndex, page.endIndex).map(function(comment) {\n          return <DisplayComment key={comment.id} id={comment.id} comment={comment}/>\n        })}\n        <Paginator route=\"newcomments\" page={page.pageNum} hasNext={page.hasNext}/>\n      </div>\n    }\n    else {\n      return <div className=\"Updates Items\">\n        <ol className=\"Items__list\" start={page.startIndex + 1}>\n          {items.slice(page.startIndex, page.endIndex).map(function(item) {\n            return <DisplayListItem key={item.id} item={item}/>\n          })}\n        </ol>\n        <Paginator route=\"newest\" page={page.pageNum} hasNext={page.hasNext}/>\n      </div>\n    }\n  }\n})\n\nmodule.exports = Updates\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/Updates.js\n **/","var React = require('react')\nvar ReactFireMixin = require('reactfire')\nvar TimeAgo = require('react-timeago')\n\nvar HNService = require('./services/HNService')\n\nvar Spinner = require('./Spinner')\n\nvar setTitle = require('./utils/setTitle')\n\n// TODO User submissions\n\n// TODO User comments\n\nvar UserProfile = React.createClass({\n  mixins: [ReactFireMixin],\n  getInitialState() {\n    return {user: {}}\n  },\n\n  componentWillMount() {\n    this.bindAsObject(HNService.userRef(this.props.params.id), 'user')\n  },\n\n  componentWillUpdate(nextProps, nextState) {\n    if (this.state.user.id !== nextState.user.id) {\n      setTitle('Profile: ' + nextState.user.id)\n    }\n  },\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.params.id !== nextProps.params.id) {\n      this.unbind('user')\n      this.bindAsObject(HNService.userRef(nextProps.params.id), 'user')\n    }\n  },\n\n  render() {\n    var user = this.state.user\n    if (!user.id) {\n      return <div className=\"UserProfile UserProfile--loading\">\n        <h4>{this.props.params.id}</h4>\n        <Spinner size=\"20\"/>\n      </div>\n    }\n    var createdDate = new Date(user.created * 1000)\n    return <div className=\"UserProfile\">\n      <h4>{user.id}</h4>\n      <dl>\n        <dt>Created</dt>\n        <dd><TimeAgo date={createdDate}/> ({createdDate.toDateString()})</dd>\n        <dt>Karma</dt>\n        <dd>{user.karma}</dd>\n        <dt>Delay</dt>\n        <dd>{user.delay}</dd>\n        {user.about && <dt>About</dt>}\n        {user.about && <dd><div className=\"UserProfile__about\" dangerouslySetInnerHTML={{__html: user.about}}/></dd>}\n      </dl>\n    </div>\n  }\n})\n\nmodule.exports = UserProfile\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/UserProfile.js\n **/","var React = require('react')\nvar {IndexRoute, Route} = require('react-router')\n\nvar App = require('./App')\nvar Item = require('./Item')\nvar NotFound = require('./NotFound')\nvar PermalinkedComment = require('./PermalinkedComment')\nvar Stories = require('./Stories')\nvar Updates = require('./Updates')\nvar UserProfile = require('./UserProfile')\n\nfunction stories(route, type, limit, title) {\n  return React.createClass({\n    render() {\n      return <Stories {...this.props} key={route} route={route} type={type} limit={limit} title={title}/>\n    }\n  })\n}\n\nfunction updates(type) {\n  return React.createClass({\n    render() {\n      return <Updates {...this.props} key={type} type={type}/>\n    }\n  })\n}\n\nvar Ask = stories('ask', 'askstories', 200, 'Ask')\nvar Comments = updates('comments')\nvar Jobs = stories('jobs', 'jobstories', 200, 'Jobs')\nvar New = stories('newest', 'newstories', 500, 'New Links')\nvar Show = stories('show', 'showstories', 200, 'Show')\nvar Top = stories('news', 'topstories', 500)\n\nmodule.exports = <Route path=\"/\" component={App}>\n  <IndexRoute component={Top}/>\n  <Route path=\"news\" component={Top}/>\n  <Route path=\"newest\" component={New}/>\n  <Route path=\"show\" component={Show}/>\n  <Route path=\"ask\" component={Ask}/>\n  <Route path=\"jobs\" component={Jobs}/>\n  <Route path=\"item/:id\" component={Item}/>\n  <Route path=\"job/:id\" component={Item}/>\n  <Route path=\"poll/:id\" component={Item}/>\n  <Route path=\"story/:id\" component={Item}/>\n  <Route path=\"comment/:id\" component={PermalinkedComment}/>\n  <Route path=\"newcomments\" component={Comments}/>\n  <Route path=\"user/:id\" component={UserProfile}/>\n  <Route path=\"*\" component={NotFound}/>\n</Route>\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/routes.js\n **/","/**\n * Based on the implementation of _.debounce() from Underscore.js 1.7.0\n * http://underscorejs.org\n * (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Distributed under the MIT license.\n *\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * The returned function has a .cancel() function which can be used to prevent\n * the debounced functiom being called.\n */\nfunction cancellableDebounce(func, wait, immediate) {\n  var timeout, args, context, timestamp, result\n\n  var later = function() {\n    var last = Date.now() - timestamp\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last)\n    }\n    else {\n      timeout = null\n      if (!immediate) {\n        result = func.apply(context, args)\n        if (!timeout) {\n          context = args = null\n        }\n      }\n    }\n  }\n\n  var debounced = function() {\n    context = this\n    args = arguments\n    timestamp = Date.now()\n    var callNow = immediate && !timeout\n    if (!timeout) {\n      timeout = setTimeout(later, wait)\n    }\n    if (callNow) {\n      result = func.apply(context, args)\n      context = args = null\n    }\n    return result\n  }\n\n  debounced.cancel = function() {\n    if (timeout) {\n      clearTimeout(timeout)\n    }\n  }\n\n  return debounced\n}\n\nmodule.exports = cancellableDebounce\n\n\n\n/** WEBPACK FOOTER **\n ** C:/repos/react-hn/src/utils/cancellableDebounce.js\n **/"],"sourceRoot":""}